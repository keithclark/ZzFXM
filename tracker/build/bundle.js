var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function l(){return Object.create(null)}function s(e){e.forEach(n)}function o(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function c(e){let t;return a(e,e=>t=e)(),t}function i(e,t,n){e.$$.on_destroy.push(a(t,n))}function u(e,t,n,l){if(e){const s=$(e,t,n,l);return e[0](s)}}function $(e,t,n,l){return e[1]&&l?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](l(t))):n.ctx}function f(e,t,n,l,s,o,r){const a=function(e,t,n,l){if(e[2]&&l){const s=e[2](l(n));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],n=Math.max(t.dirty.length,s.length);for(let l=0;l<n;l+=1)e[l]=t.dirty[l]|s[l];return e}return t.dirty|s}return t.dirty}(t,l,s,o);if(a){const s=$(t,n,l,r);e.p(s,a)}}function p(e,t,n=t){return e.set(n),t}const d="undefined"!=typeof window;let m=d?()=>window.performance.now():()=>Date.now(),g=d?e=>requestAnimationFrame(e):e;const h=new Set;function v(e){h.forEach(t=>{t.c(e)||(h.delete(t),t.f())}),0!==h.size&&g(v)}function b(e,t){e.appendChild(t)}function w(e,t,n){e.insertBefore(t,n||null)}function y(e){e.parentNode.removeChild(e)}function x(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function _(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function z(e){return document.createTextNode(e)}function E(){return z(" ")}function P(){return z("")}function R(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function M(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function S(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function A(e,t){e.value=null==t?"":t}function T(e,t,n,l){e.style.setProperty(t,n,l?"important":"")}function C(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}}function j(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function L(e,t,n){e.classList[n?"add":"remove"](t)}function N(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}const O=new Set;let D,q=0;function I(e,t,n,l,s,o,r,a=0){const c=16.666/l;let i="{\n";for(let e=0;e<=1;e+=c){const l=t+(n-t)*o(e);i+=100*e+`%{${r(l,1-l)}}\n`}const u=i+`100% {${r(n,1-n)}}\n}`,$=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${a}`,f=e.ownerDocument;O.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(k("style")).sheet),d=f.__svelte_rules||(f.__svelte_rules={});d[$]||(d[$]=!0,p.insertRule(`@keyframes ${$} ${u}`,p.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?m+", ":""}${$} ${l}ms linear ${s}ms 1 both`,q+=1,$}function U(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),s=n.length-l.length;s&&(e.style.animation=l.join(", "),q-=s,q||g(()=>{q||(O.forEach(e=>{const t=e.__svelte_stylesheet;let n=t.cssRules.length;for(;n--;)t.deleteRule(n);e.__svelte_rules={}}),O.clear())}))}function F(e){D=e}function X(){if(!D)throw new Error("Function called outside component initialization");return D}function B(e){X().$$.on_mount.push(e)}function H(e){X().$$.on_destroy.push(e)}function G(){const e=X();return(t,n)=>{const l=e.$$.callbacks[t];if(l){const s=N(t,n);l.slice().forEach(t=>{t.call(e,s)})}}}function J(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}const K=[],V=[],Y=[],Z=[],W=Promise.resolve();let Q=!1;function ee(){Q||(Q=!0,W.then(oe))}function te(e){Y.push(e)}function ne(e){Z.push(e)}let le=!1;const se=new Set;function oe(){if(!le){le=!0;do{for(let e=0;e<K.length;e+=1){const t=K[e];F(t),re(t.$$)}for(K.length=0;V.length;)V.pop()();for(let e=0;e<Y.length;e+=1){const t=Y[e];se.has(t)||(se.add(t),t())}Y.length=0}while(K.length);for(;Z.length;)Z.pop()();Q=!1,le=!1,se.clear()}}function re(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(te)}}let ae;function ce(e,t,n){e.dispatchEvent(N(`${t?"intro":"outro"}${n}`))}const ie=new Set;let ue;function $e(){ue={r:0,c:[],p:ue}}function fe(){ue.r||s(ue.c),ue=ue.p}function pe(e,t){e&&e.i&&(ie.delete(e),e.i(t))}function de(e,t,n,l){if(e&&e.o){if(ie.has(e))return;ie.add(e),ue.c.push(()=>{ie.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}}const me={duration:0};function ge(n,l,r,a){let c=l(n,r),i=a?0:1,u=null,$=null,f=null;function p(){f&&U(n,f)}function d(e,t){const n=e.b-i;return t*=Math.abs(n),{a:i,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function b(l){const{delay:o=0,duration:r=300,easing:a=t,tick:b=e,css:w}=c||me,y={start:m()+o,b:l};l||(y.group=ue,ue.r+=1),u?$=y:(w&&(p(),f=I(n,i,l,r,o,a,w)),l&&b(0,1),u=d(y,r),te(()=>ce(n,l,"start")),function(e){let t;0===h.size&&g(v),new Promise(n=>{h.add(t={c:e,f:n})})}(e=>{if($&&e>$.start&&(u=d($,r),$=null,ce(n,u.b,"start"),w&&(p(),f=I(n,i,u.b,u.duration,0,a,c.css))),u)if(e>=u.end)b(i=u.b,1-i),ce(n,u.b,"end"),$||(u.b?p():--u.group.r||s(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;i=u.a+u.d*a(t/u.duration),b(i,1-i)}return!(!u&&!$)}))}return{run(e){o(c)?(ae||(ae=Promise.resolve(),ae.then(()=>{ae=null})),ae).then(()=>{c=c(),b(e)}):b(e)},end(){p(),u=$=null}}}const he="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ve(e,t){e.d(1),t.delete(e.key)}function be(e,t,n){const l=e.$$.props[t];void 0!==l&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function we(e){e&&e.c()}function ye(e,t,l){const{fragment:r,on_mount:a,on_destroy:c,after_update:i}=e.$$;r&&r.m(t,l),te(()=>{const t=a.map(n).filter(o);c?c.push(...t):s(t),e.$$.on_mount=[]}),i.forEach(te)}function xe(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ke(t,n,o,r,a,c,i=[-1]){const u=D;F(t);const $=n.props||{},f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:a,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:l(),dirty:i,skip_bound:!1};let p=!1;if(f.ctx=o?o(t,$,(e,n,...l)=>{const s=l.length?l[0]:n;return f.ctx&&a(f.ctx[e],f.ctx[e]=s)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](s),p&&function(e,t){-1===e.$$.dirty[0]&&(K.push(e),ee(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n}):[],f.update(),p=!0,s(f.before_update),f.fragment=!!r&&r(f.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);f.fragment&&f.fragment.l(e),e.forEach(y)}else f.fragment&&f.fragment.c();n.intro&&pe(t.$$.fragment),ye(t,n.target,n.anchor),oe()}F(u)}class _e{$destroy(){xe(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ze={z:1,s:2,x:3,d:4,c:5,v:6,g:7,b:8,h:9,n:10,j:11,m:12,",":13,l:14,".":15,";":16,"/":17,q:18,2:19,w:20,3:21,e:22,4:23,r:24,t:25,6:26,y:27,7:28,u:29,i:30,9:31,o:32,0:33,p:34,"-":35,"[":36},Ee=[60,30,15,10,5],Pe=[44100,22050,11025],Re=[16384,8192,4096,2048,1024],Me=Pe[0],Se=Re[2],Ae=Ee[0],Te=[];function Ce(t,n=e){let l;const s=[];function o(e){if(r(t,e)&&(t=e,l)){const e=!Te.length;for(let e=0;e<s.length;e+=1){const n=s[e];n[1](),Te.push(n,t)}if(e){for(let e=0;e<Te.length;e+=2)Te[e][0](Te[e+1]);Te.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(r,a=e){const c=[r,a];return s.push(c),1===s.length&&(l=n(o)||e),r(t),()=>{const e=s.indexOf(c);-1!==e&&s.splice(e,1),0===s.length&&(l(),l=null)}}}}const je=new Ce(""),Le=new Ce(125),Ne=new Ce([]),Oe=new Ce([]),De=new Ce([]),qe=new Ce([]),Ie=new Ce([]),Ue=new Ce({}),Fe=new Ce,Xe=new Ce(0),Be=new Ce(0),He=new Ce(0),Ge=new Ce(0),Je=new Ce(.5),Ke=new Ce(0),Ve=new Ce(0),Ye=new Ce([]),Ze=new Ce([]),We=new Ce(!1),Qe=new Ce(Me),et=new Ce(Se),tt=new Ce(Ae),nt=e=>`[${e.map(lt).join(",")}]`,lt=e=>{let t=e.map((e,t)=>{let n=(e=>{let t=JSON.stringify(e);return t=t.replace(/^(-?)0/g,"$1"),t=t.replace(/0{3,}$/g,e=>"e"+e.length),t})(e);return 0==t?"1"==n?n="":""==n&&(n="0"):1==t?".05"==n?n="":""==n&&(n="0"):2==t?"220"==n?n="":""==n&&(n="0"):5==t?".1"==n?n="":""==n&&(n="0"):7==t||17==t?"1"==n?n="":""==n&&(n="0"):"0"!==n&&"null"!==n||(n=""),n});return 0===t.length&&(t=[,0]),`[${t.join(",").replace(/,+$/g,"")}]`},st=e=>JSON.stringify(e).replace(/null/g,"").replace(/(\D)0(?=\D)/g,"$1").replace(/,]/g,",,]"),ot=e=>JSON.stringify(e),rt=e=>{if(125!==e)return JSON.stringify(e)},at=e=>!ut(e),ct=e=>!$t(e),it=e=>!ft(e),ut=e=>it(e)&&!isNaN(parseFloat(e)),$t=e=>Array.isArray(e),ft=e=>null!=e&&Object.is(e.constructor,Object),pt=e=>{let t;return Array.isArray(e)?(t=(e=>ct(e)?new Error("Missing instrument structure"):(e=[...e]).some(ct)?new Error("Invalid instrument structure"):!e.flat().some(at)||new Error("Invalid instrument parameter type"))(e[0]),t instanceof Error?t:(t=(e=>ct(e)?new Error("Missing pattern structure"):(e=[...e]).some(ct)?new Error("Invalid pattern structure"):!e.flat(2).some(at)||new Error("Invalid pattern parameter type"))(e[1]),t instanceof Error?t:(t=(e=>ct(e)?new Error("Missing sequence structure"):!(e=[...e]).some(at)||new Error("Invalid sequence parameter type"))(e[2]),t instanceof Error?t:void 0!==e[3]&&at(e[3])?new Error("Invalid speed"):void 0===e[4]||!it(e[4])||new Error("Invalid meta data")))):new Error("Invalid song syntax")},dt=e=>JSON.parse(mt(e),(e,t)=>{if(null!==t)return t}),mt=e=>e.replace(/\[,/g,"[null,").replace(/,,\]/g,",null]").replace(/,\s*(?=[,\]])/g,",null").replace(/([\[,]-?)(?=\.)/g,"$10").replace(/-\./g,"-0."),gt=e=>e.map(e=>[...e].map(e=>e||0)),ht=e=>{const t=e.slice();return t.length=24,[...t].map((e,t)=>0===t&&void 0===e?1:1===t&&void 0===e?.05:2===t&&void 0===e?220:5===t&&void 0===e?.1:7===t&&void 0===e||17===t&&void 0===e?1:e||0)};let vt=0;const bt=(e,t="Instrument "+vt)=>{let n;return Ne.update(t=>(t.push(yt(...e)),n=t.length-1,t)),Oe.update(e=>(e.push(t),e)),vt++,n},wt=(e,t)=>{Ne.update(n=>(n[e]=yt(...t),n))},yt=(...e)=>ht(e),xt=(e,t,n)=>Math.max(t,Math.min(e,n)),kt=(e,t=2)=>{const n=Math.pow(10,t);return Math.round(e*n)/n},_t=e=>JSON.parse(JSON.stringify(e)),zt=["REL","---","C-1","C#1","D-1","D#1","E-1","F-1","F#1","G-1","G#1","A-1","A#1","B-1","C-2","C#2","D-2","D#2","E-2","F-2","F#2","G-2","G#2","A-2","A#2","B-2","C-3","C#3","D-3","D#3","E-3","F-3","F#3","G-3","G#3","A-3","A#3","B-3"];let Et=0;const Pt=(e,t="Pattern "+Et)=>{let n;return De.update(t=>(t.push(e),n=t.length-1,t)),qe.update(e=>(e.push(t),e)),Ze.update(t=>(t.push(new Array(e.length).fill(!1)),t)),Et++,n},Rt=(e=64,t=0,n=0)=>[t,n,...new Array(e).fill(0)],Mt=(e,t,n,l)=>{De.update(s=>{const o=s[e][t],r=0|o[n+2],a=kt(o[n+2]%1,2);return o[n+2]=r+xt(a+l,0,.99),s})},St=(e,t,n,l)=>{De.update(s=>{const o=s[e][t],r=kt(o[n+2]%1,2);return o[n+2]=l+r,s})},At=e=>zt[e]||e,Tt=e=>{const t=c(De),n=c(Ie);let l=0;e%=n.length;for(let s=0;s<e;s++)l+=t[n[s]][0].length-2;return l},Ct=()=>{const e=c(De),t=c(Ie);let n=0;for(let l=0;l<t.length;l++)n+=e[t[l]][0].length-2;return n},jt=()=>{Ie.set([]),vt=0,Ne.set([]),Oe.set([]),Et=0,De.set([]),qe.set([]),Ze.set([])},Lt=()=>{Nt([[yt(1,0,400)],[[Rt(64,0,-1),Rt(64,0,1),Rt(64,0,-1),Rt(64,0,1)]],[0],125,{title:"New Song"}])},Nt=e=>{jt(),Ue.set(e[4]||{}),je.set(e[4]&&e[4].title||"Untitled song"),Le.set(e[3]||125),e[0].forEach((t,n)=>{const l=e[4]&&e[4].instruments&&e[4].instruments[n];bt(t,l)}),e[1].forEach((t,n)=>{const l=e[4]&&e[4].patterns&&e[4].patterns[n];Pt(t,l)}),Ie.set(e[2])},Ot=(e={})=>{const t=(e=>{const t=Object.entries(e).filter(([e,t])=>""!==t);return Object.fromEntries(t)})(c(Ue));let n;return e.noMeta||(n={...t,title:c(je),instruments:c(Oe),patterns:c(qe)}),l=[c(Ne),c(De),c(Ie),c(Le),n],`[${[nt(l[0]),st(l[1]),ot(l[2]),rt(l[3]),(s=l[4],JSON.stringify(s))].join(",").replace(/,+$/,"")}]`;var l,s},Dt=e=>{const t=URL.createObjectURL(e);return qt(t).finally(()=>{URL.revokeObjectURL(t)})},qt=e=>fetch(e).then(e=>e.text()).then(It),It=e=>{Nt((e=>{let t;try{t=dt(e)}catch(e){throw new Error("Invalid file format")}const n=pt(t);if(n instanceof Error)throw n;return t[0]=t[0].map(ht),t[1]=t[1].map(gt),t})(e))};let Ut,Ft,Xt,Bt,Ht,Gt,Jt,Kt,Vt,Yt,Zt,Wt=0,Qt=0,en=null,tn=0,nn=!1,ln=[];const sn=zzfxX.createGain();sn.connect(zzfxX.destination),zzfxX.suspend();const on=async()=>{0===tn&&await zzfxX.resume(),tn++},rn=async()=>{tn--,0===tn&&await zzfxX.suspend()},an=()=>{en=null,Ut=zzfxX.createScriptProcessor(Yt,0,2),Ut.onaudioprocess=mn,Ut.connect(sn)},cn=()=>{Ut.onaudioprocess=null,Ut.disconnect(sn),Ut=null},un=e=>{let t=0,n=0;for(let l=0;l<Gt.length;l++){let s=Gt[l];if(n=t+Xt[s][0].length-3,n>=e)return{sequence:l,pattern:s,row:e-t};t=n+1}return un(e%(n+1))},$n=()=>{Wt%=Vt;const e=un(Wt),{pattern:t,row:n}=e;return en||(en=[]),Xt[t].forEach((e,t)=>{const l=e[n+2];if(l){let n=0|l,s=l%1;if(n){if(-1===n)return void(en[t]=null);en[t]={panning:e[1],attenuation:s,sample:gn(e[0],n),offset:0}}s&&en[t]&&(en[t].attenuation=s)}}),Wt++,e},fn=(e,t,n,l,s)=>{let o=0;if(e){const{panning:r,sample:a}=e,c=zzfxR/zzfxX.sampleRate,i=a.length;let{attenuation:u}=e;for(let $=t;$<t+n&&!(e.offset>=i);$++){e.offset>i-99&&(u+=1/99);const t=(1-u)*a[0|e.offset]||0;l[$]+=-t*r+t,s[$]+=t*r+t,o=Math.min(1,Math.max(Math.abs(t),o)),e.offset+=c}}return o},pn=async()=>{await on(),an(),We.set(!0),nn=!0,dn()},dn=()=>{if(nn&&setTimeout(dn,1e3/Jt),!ln.length)return;const{sequence:e,pattern:t,row:n,peakLevels:l}=ln.shift();Gt===Bt&&(He.set(e),Be.set(t)),Fe.set(n),Ye.set(l)},mn=e=>{const{outputBuffer:t}=e,n=t.getChannelData(0).fill(0),l=t.getChannelData(1).fill(0);let s=t.length,o=0;ln=[];const r=zzfxX.sampleRate/Ht*60>>2,a=zzfxX.sampleRate/Jt;for(en||(Kt=$n());s>0;){const e=Math.min(s,a,r-Qt);Qt>=r&&(Kt=$n(),Qt-=r);const t=en.map((t,s)=>{if(!Zt[Kt.pattern][s])return fn(t,o,e,n,l)});(0===o||e>=a)&&ln.push({...Kt,peakLevels:t}),o+=e,Qt+=e,s-=e}},gn=(e,t)=>{let n=[...Ft[e]];return n[2]*=2**((t-12)/12),zzfxG(...n)},hn=(e,t)=>vn(gn(e,t)),vn=async e=>{await on();const t=zzfxP([...e]);return t.onended=rn,t},bn=async(e,t=!1)=>{if(Ut)return!1;Gt=[e],Wt=t?0:c(Fe),await pn()},wn=async(e=!1)=>{if(Ut)return!1;Gt=Bt,e||null===c(He)?Wt=0:(Wt=Tt(c(He)),Wt+=c(Fe),Qt=0,en=null),await pn()},yn=async()=>{Ut&&(cn(),We.set(!1),Ye.set([]),nn=!1,ln=[],await rn())};function xn(e){let t,n,l,s,o,r;const a=e[2].default,c=u(a,e,e[1],null);return{c(){t=k("div"),n=k("span"),l=z(e[0]),s=E(),o=k("span"),c&&c.c(),M(n,"class","field__label embossed svelte-8yml6m"),M(o,"class","field__controls inset svelte-8yml6m"),M(t,"class","field outset svelte-8yml6m")},m(e,a){w(e,t,a),b(t,n),b(n,l),b(t,s),b(t,o),c&&c.m(o,null),r=!0},p(e,[t]){(!r||1&t)&&S(l,e[0]),c&&c.p&&2&t&&f(c,a,e,e[1],t,null,null)},i(e){r||(pe(c,e),r=!0)},o(e){de(c,e),r=!1},d(e){e&&y(t),c&&c.d(e)}}}function kn(e,t,n){let{label:l=""}=t,{$$slots:s={},$$scope:o}=t;return e.$$set=e=>{"label"in e&&n(0,l=e.label),"$$scope"in e&&n(1,o=e.$$scope)},[l,o,s]}Ne.subscribe(e=>Ft=e),Le.subscribe(e=>Ht=e),Ve.subscribe(e=>Vt=e),De.subscribe(e=>{Xt=e,Ve.set(Ct())}),Ie.subscribe(e=>{Bt=e,Ve.set(Ct())}),Je.subscribe(e=>{sn.gain.value=e}),Qe.subscribe(e=>{zzfxR=e,en=null}),et.subscribe(e=>{nn?(cn(),Yt=e,an()):Yt=e}),tt.subscribe(e=>Jt=e),Ze.subscribe(e=>Zt=e);class _n extends _e{constructor(e){super(),ke(this,e,kn,xn,r,{label:0})}}function zn(t){let n,l,s,o;return{c(){n=k("button"),l=z(t[0]),M(n,"class","outset svelte-1t979x3"),n.disabled=t[1],M(n,"title",t[2])},m(e,r){w(e,n,r),b(n,l),s||(o=R(n,"click",t[5]),s=!0)},p(e,[t]){1&t&&S(l,e[0]),2&t&&(n.disabled=e[1]),4&t&&M(n,"title",e[2])},i:e,o:e,d(e){e&&y(n),s=!1,o()}}}function En(e,t,n){let l,{hint:s=""}=t,{label:o=""}=t,{disabled:r=!1}=t,{keyboard:a=""}=t;return e.$$set=e=>{"hint"in e&&n(3,s=e.hint),"label"in e&&n(0,o=e.label),"disabled"in e&&n(1,r=e.disabled),"keyboard"in e&&n(4,a=e.keyboard)},e.$$.update=()=>{24&e.$$.dirty&&(s&&a?n(2,l=`${s}\n\nShortcut: ${a}`):s?n(2,l=""+s):a&&n(2,l="Shortcut: "+a))},[o,r,l,s,a,function(t){J(e,t)}]}class Pn extends _e{constructor(e){super(),ke(this,e,En,zn,r,{hint:3,label:0,disabled:1,keyboard:4})}}function Rn(e){let t,n;return t=new Pn({props:{label:e[2]?"Stop":"Play",disabled:e[0],keyboard:e[1]}}),t.$on("click",e[3]),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},p(e,[n]){const l={};4&n&&(l.label=e[2]?"Stop":"Play"),1&n&&(l.disabled=e[0]),2&n&&(l.keyboard=e[1]),t.$set(l)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Mn(e,t,n){let{disabled:l=!1}=t,{keyboard:s=""}=t,{playing:o=!1}=t;return e.$$set=e=>{"disabled"in e&&n(0,l=e.disabled),"keyboard"in e&&n(1,s=e.keyboard),"playing"in e&&n(2,o=e.playing)},[l,s,o,function(t){J(e,t)}]}class Sn extends _e{constructor(e){super(),ke(this,e,Mn,Rn,r,{disabled:0,keyboard:1,playing:2})}}function An(e){let t,n;const l=e[1].default,s=u(l,e,e[0],null);return{c(){t=k("div"),s&&s.c(),M(t,"class","toolbar svelte-16mvlue")},m(e,l){w(e,t,l),s&&s.m(t,null),n=!0},p(e,[t]){s&&s.p&&1&t&&f(s,l,e,e[0],t,null,null)},i(e){n||(pe(s,e),n=!0)},o(e){de(s,e),n=!1},d(e){e&&y(t),s&&s.d(e)}}}function Tn(e,t,n){let{$$slots:l={},$$scope:s}=t;return e.$$set=e=>{"$$scope"in e&&n(0,s=e.$$scope)},[s,l]}class Cn extends _e{constructor(e){super(),ke(this,e,Tn,An,r,{})}}const jn=e=>({}),Ln=e=>({});function Nn(e){let t,n,l;const s=e[1].head,o=u(s,e,e[0],Ln),r=e[1].default,a=u(r,e,e[0],null);return{c(){t=k("div"),o&&o.c(),n=E(),a&&a.c(),M(t,"class","pane inset svelte-1akpcxy")},m(e,s){w(e,t,s),o&&o.m(t,null),b(t,n),a&&a.m(t,null),l=!0},p(e,[t]){o&&o.p&&1&t&&f(o,s,e,e[0],t,jn,Ln),a&&a.p&&1&t&&f(a,r,e,e[0],t,null,null)},i(e){l||(pe(o,e),pe(a,e),l=!0)},o(e){de(o,e),de(a,e),l=!1},d(e){e&&y(t),o&&o.d(e),a&&a.d(e)}}}function On(e,t,n){let{$$slots:l={},$$scope:s}=t;return e.$$set=e=>{"$$scope"in e&&n(0,s=e.$$scope)},[s,l]}class Dn extends _e{constructor(e){super(),ke(this,e,On,Nn,r,{})}}function qn(e,t,n){const l=e.slice();return l[27]=t[n],l[26]=n,l}function In(e,t,n){const l=e.slice();return l[24]=t[n],l[25]=t,l[26]=n,l}function Un(e){let t,n,l,s,o,r,a,c;return t=new Pn({props:{label:"Add"}}),t.$on("click",e[8]),l=new Pn({props:{label:"Delete",disabled:!e[5]}}),l.$on("click",e[9]),o=new Pn({props:{label:"Move Left",disabled:!e[5]||0===e[0]}}),o.$on("click",e[12]),a=new Pn({props:{label:"Move Right",disabled:!e[5]||e[0]===e[3].length-1}}),a.$on("click",e[13]),{c(){we(t.$$.fragment),n=E(),we(l.$$.fragment),s=E(),we(o.$$.fragment),r=E(),we(a.$$.fragment)},m(e,i){ye(t,e,i),w(e,n,i),ye(l,e,i),w(e,s,i),ye(o,e,i),w(e,r,i),ye(a,e,i),c=!0},p(e,t){const n={};32&t&&(n.disabled=!e[5]),l.$set(n);const s={};33&t&&(s.disabled=!e[5]||0===e[0]),o.$set(s);const r={};41&t&&(r.disabled=!e[5]||e[0]===e[3].length-1),a.$set(r)},i(e){c||(pe(t.$$.fragment,e),pe(l.$$.fragment,e),pe(o.$$.fragment,e),pe(a.$$.fragment,e),c=!0)},o(e){de(t.$$.fragment,e),de(l.$$.fragment,e),de(o.$$.fragment,e),de(a.$$.fragment,e),c=!1},d(e){xe(t,e),e&&y(n),xe(l,e),e&&y(s),xe(o,e),e&&y(r),xe(a,e)}}}function Fn(e){let t,n;return t=new Sn({props:{playing:e[4],keyboard:"ALT + ENTER"}}),t.$on("click",e[10]),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},p(e,n){const l={};16&n&&(l.playing=e[4]),t.$set(l)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Xn(e){let t,n,l,s,o,r;return t=new _n({props:{label:"Sequence",$$slots:{default:[Un]},$$scope:{ctx:e}}}),l=new _n({props:{label:"Playback",$$slots:{default:[Fn]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment),n=E(),we(l.$$.fragment),s=E(),o=k("div"),M(o,"class","outset")},m(e,a){ye(t,e,a),w(e,n,a),ye(l,e,a),w(e,s,a),w(e,o,a),r=!0},p(e,n){const s={};536870953&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s);const o={};536870928&n&&(o.$$scope={dirty:n,ctx:e}),l.$set(o)},i(e){r||(pe(t.$$.fragment,e),pe(l.$$.fragment,e),r=!0)},o(e){de(t.$$.fragment,e),de(l.$$.fragment,e),r=!1},d(e){xe(t,e),e&&y(n),xe(l,e),e&&y(s),e&&y(o)}}}function Bn(e){let t,n,l;return n=new Cn({props:{$$slots:{default:[Xn]},$$scope:{ctx:e}}}),{c(){t=k("div"),we(n.$$.fragment),M(t,"slot","head")},m(e,s){w(e,t,s),ye(n,t,null),l=!0},p(e,t){const l={};536870969&t&&(l.$$scope={dirty:t,ctx:e}),n.$set(l)},i(e){l||(pe(n.$$.fragment,e),l=!0)},o(e){de(n.$$.fragment,e),l=!1},d(e){e&&y(t),xe(n)}}}function Hn(e){let t,n=e[24]+"";return{c(){t=z(n)},m(e,n){w(e,t,n)},p(e,l){8&l&&n!==(n=e[24]+"")&&S(t,n)},d(e){e&&y(t)}}}function Gn(e){let t,n,l,o=e[7],r=[];for(let t=0;t<o.length;t+=1)r[t]=Jn(qn(e,o,t));function a(){e[17].call(t,e[25],e[26])}return{c(){t=k("select");for(let e=0;e<r.length;e+=1)r[e].c();M(t,"class","select svelte-1mxxeke"),void 0===e[24]&&te(a)},m(s,o){w(s,t,o);for(let e=0;e<r.length;e+=1)r[e].m(t,null);C(t,e[24]),n||(l=[R(t,"change",a),R(t,"input",e[15])],n=!0)},p(n,l){if(e=n,128&l){let n;for(o=e[7],n=0;n<o.length;n+=1){const s=qn(e,o,n);r[n]?r[n].p(s,l):(r[n]=Jn(s),r[n].c(),r[n].m(t,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=o.length}8&l&&C(t,e[24])},d(e){e&&y(t),x(r,e),n=!1,s(l)}}}function Jn(t){let n,l,s;return{c(){n=k("option"),l=z(t[26]),n.__value=s=t[26],n.value=n.__value},m(e,t){w(e,n,t),b(n,l)},p:e,d(e){e&&y(n)}}}function Kn(e){let t,n,l,s;function o(e,t){return e[26]===e[0]?Gn:Hn}let r=o(e),a=r(e);function c(...t){return e[18](e[26],...t)}return{c(){t=k("div"),a.c(),n=E(),M(t,"class","pattern svelte-1mxxeke"),T(t,"background",e[14](e[24])),T(t,"max-width",e[7][e[24]][0].length-2+"px"),T(t,"min-width",e[7][e[24]][0].length-2+"px"),L(t,"selected",e[26]===e[0])},m(e,o){w(e,t,o),a.m(t,null),b(t,n),l||(s=R(t,"click",c),l=!0)},p(l,s){r===(r=o(e=l))&&a?a.p(e,s):(a.d(1),a=r(e),a&&(a.c(),a.m(t,n))),8&s&&T(t,"background",e[14](e[24])),136&s&&T(t,"max-width",e[7][e[24]][0].length-2+"px"),136&s&&T(t,"min-width",e[7][e[24]][0].length-2+"px"),1&s&&L(t,"selected",e[26]===e[0])},d(e){e&&y(t),a.d(),l=!1,s()}}}function Vn(t){let n,l,s,o,r,a=t[3],c=[];for(let e=0;e<a.length;e+=1)c[e]=Kn(In(t,a,e));return{c(){n=E(),l=k("div"),s=k("div"),o=k("div"),r=E();for(let e=0;e<c.length;e+=1)c[e].c();M(o,"class","marker svelte-1mxxeke"),T(o,"transform","translateX("+t[6]+"px"),M(s,"class","sequence__patterns svelte-1mxxeke"),M(l,"class","sequence svelte-1mxxeke")},m(e,a){w(e,n,a),w(e,l,a),b(l,s),b(s,o),t[16](o),b(s,r);for(let e=0;e<c.length;e+=1)c[e].m(s,null);t[19](l)},p(e,t){if(T(o,"transform","translateX("+e[6]+"px"),18569&t){let n;for(a=e[3],n=0;n<a.length;n+=1){const l=In(e,a,n);c[n]?c[n].p(l,t):(c[n]=Kn(l),c[n].c(),c[n].m(s,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=a.length}},i:e,o:e,d(e){e&&y(n),e&&y(l),t[16](null),x(c,e),t[19](null)}}}function Yn(e){let t,n;return t=new Dn({props:{$$slots:{default:[Vn],head:[Bn]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},p(e,[n]){const l={};536871167&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Zn(e,t,n){let l,s,o,r;i(e,Ie,e=>n(3,l=e)),i(e,We,e=>n(4,s=e)),i(e,Ke,e=>n(6,o=e)),i(e,De,e=>n(7,r=e));let a,c,u,{selectedPosition:$=0}=t,f=!1;const d=G(),m=e=>{n(0,$=e),d("select")},g=()=>{f||(setTimeout(()=>f=!1,500),f=!0)};B(()=>{n(20,u=new IntersectionObserver(e=>{e[0].isIntersecting||f||a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},{root:c,threshold:[0,1]})),c.addEventListener("scroll",g)}),H(()=>{u.disconnect(),c.removeEventListener("scroll",g)});let h;return e.$$set=e=>{"selectedPosition"in e&&n(0,$=e.selectedPosition)},e.$$.update=()=>{1&e.$$.dirty&&n(5,h=null!==$),1048594&e.$$.dirty&&a&&(s?u.observe(a):u.unobserve(a))},[$,a,c,l,s,h,o,r,()=>{p(Ie,l=[...l,0]),n(0,$=l.length-1),d("select")},()=>{p(Ie,l=[...l.slice(0,$),...l.slice($+1)]),n(0,$=Math.min($,l.length-1))},()=>{s?yn():wn()},m,()=>{p(Ie,l=[...l.slice(0,$-1),l[$],l[$-1],...l.slice($+1)]),n(0,$--,$)},()=>{p(Ie,l=[...l.slice(0,$),l[$+1],l[$],...l.slice($+2)]),n(0,$++,$)},e=>`hsl(${90+20*e},35%,50%)`,function(t){J(e,t)},function(e){V[e?"unshift":"push"](()=>{a=e,n(1,a)})},function(e,t){e[t]=j(this),Ie.set(l)},e=>m(e),function(e){V[e?"unshift":"push"](()=>{c=e,n(2,c)})}]}class Wn extends _e{constructor(e){super(),ke(this,e,Zn,Yn,r,{selectedPosition:0})}}function Qn(e){let t,n,l;return n=new Pn({props:{label:e[2],disabled:e[3],keyboard:e[4],hint:e[1]}}),n.$on("click",e[6]),n.$on("click",e[5]),{c(){t=k("span"),we(n.$$.fragment),M(t,"class","toggleButton svelte-1rolodz"),L(t,"checked",e[0])},m(e,s){w(e,t,s),ye(n,t,null),l=!0},p(e,[l]){const s={};4&l&&(s.label=e[2]),8&l&&(s.disabled=e[3]),16&l&&(s.keyboard=e[4]),2&l&&(s.hint=e[1]),n.$set(s),1&l&&L(t,"checked",e[0])},i(e){l||(pe(n.$$.fragment,e),l=!0)},o(e){de(n.$$.fragment,e),l=!1},d(e){e&&y(t),xe(n)}}}function el(e,t,n){let{hint:l=""}=t,{label:s=""}=t,{disabled:o=!1}=t,{keyboard:r=""}=t,{checked:a=!1}=t;return e.$$set=e=>{"hint"in e&&n(1,l=e.hint),"label"in e&&n(2,s=e.label),"disabled"in e&&n(3,o=e.disabled),"keyboard"in e&&n(4,r=e.keyboard),"checked"in e&&n(0,a=e.checked)},[a,l,s,o,r,()=>{n(0,a=!a)},function(t){J(e,t)}]}class tl extends _e{constructor(e){super(),ke(this,e,el,Qn,r,{hint:1,label:2,disabled:3,keyboard:4,checked:0})}}let nl=0;function ll(t){let n,l,s;return{c(){n=_("svg"),l=_("path"),M(l,"fill-rule","evenodd"),M(l,"d",s=t[1][t[0]]),M(n,"viewBox","0 0 16 16"),M(n,"class","svelte-16jcrba")},m(e,t){w(e,n,t),b(n,l)},p(e,[t]){1&t&&s!==(s=e[1][e[0]])&&M(l,"d",s)},i:e,o:e,d(e){e&&y(n)}}}function sl(e,t,n){let{name:l=""}=t;return e.$$set=e=>{"name"in e&&n(0,l=e.name)},[l,{warning:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 5zm.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"}]}class ol extends _e{constructor(e){super(),ke(this,e,sl,ll,r,{name:0})}}function rl(e){let t,n,l;return n=new ol({props:{name:"warning"}}),{c(){t=k("span"),we(n.$$.fragment),M(t,"class","warning svelte-1s44jfz"),M(t,"title",e[0])},m(e,s){w(e,t,s),ye(n,t,null),l=!0},p(e,[n]){(!l||1&n)&&M(t,"title",e[0])},i(e){l||(pe(n.$$.fragment,e),l=!0)},o(e){de(n.$$.fragment,e),l=!1},d(e){e&&y(t),xe(n)}}}function al(e,t,n){let{reason:l=""}=t;return e.$$set=e=>{"reason"in e&&n(0,l=e.reason)},[l]}class cl extends _e{constructor(e){super(),ke(this,e,al,rl,r,{reason:0})}}const il=e=>({}),ul=e=>({id:e[3]});function $l(e){let t,n;return t=new cl({props:{reason:e[2]}}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},p(e,n){const l={};4&n&&(l.reason=e[2]),t.$set(l)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function fl(e){let t,n,l,s,o,r,a,c=e[2]&&$l(e);const i=e[5].default,$=u(i,e,e[4],ul);return{c(){t=k("div"),n=k("label"),l=z(e[0]),s=E(),c&&c.c(),o=E(),r=k("span"),$&&$.c(),M(n,"for",e[3]),M(n,"class","property__label embossed svelte-n3wd49"),M(r,"class","property__controls inset svelte-n3wd49"),M(t,"class","property outset svelte-n3wd49"),M(t,"title",e[1])},m(e,i){w(e,t,i),b(t,n),b(n,l),b(t,s),c&&c.m(t,null),b(t,o),b(t,r),$&&$.m(r,null),a=!0},p(e,[n]){(!a||1&n)&&S(l,e[0]),e[2]?c?(c.p(e,n),4&n&&pe(c,1)):(c=$l(e),c.c(),pe(c,1),c.m(t,o)):c&&($e(),de(c,1,1,()=>{c=null}),fe()),$&&$.p&&16&n&&f($,i,e,e[4],n,il,ul),(!a||2&n)&&M(t,"title",e[1])},i(e){a||(pe(c),pe($,e),a=!0)},o(e){de(c),de($,e),a=!1},d(e){e&&y(t),c&&c.d(),$&&$.d(e)}}}function pl(e,t,n){let{label:l=""}=t,{hint:s=null}=t,{warning:o=null}=t,r="elm-"+nl++,{$$slots:a={},$$scope:c}=t;return e.$$set=e=>{"label"in e&&n(0,l=e.label),"hint"in e&&n(1,s=e.hint),"warning"in e&&n(2,o=e.warning),"$$scope"in e&&n(4,c=e.$$scope)},[l,s,o,r,c,a]}class dl extends _e{constructor(e){super(),ke(this,e,pl,fl,r,{label:0,hint:1,warning:2})}}function ml(e){let t,n,l,s;return{c(){t=k("input"),M(t,"id",n=e[7]),T(t,"width",e[3]+1+"ch"),M(t,"spellcheck","false"),M(t,"type","text"),M(t,"class","input")},m(n,o){w(n,t,o),A(t,e[0]),l||(s=R(t,"input",e[6]),l=!0)},p(e,l){128&l&&n!==(n=e[7])&&M(t,"id",n),8&l&&T(t,"width",e[3]+1+"ch"),1&l&&t.value!==e[0]&&A(t,e[0])},d(e){e&&y(t),l=!1,s()}}}function gl(e){let t,n,l,s;return{c(){t=k("textarea"),M(t,"id",n=e[7]),T(t,"width",e[3]+1+"ch"),M(t,"rows","5"),M(t,"spellcheck","false"),M(t,"class","input svelte-15lna0i")},m(n,o){w(n,t,o),A(t,e[0]),l||(s=R(t,"input",e[5]),l=!0)},p(e,l){128&l&&n!==(n=e[7])&&M(t,"id",n),8&l&&T(t,"width",e[3]+1+"ch"),1&l&&A(t,e[0])},d(e){e&&y(t),l=!1,s()}}}function hl(e){let t;function n(e,t){return e[4]?gl:ml}let l=n(e),s=l(e);return{c(){s.c(),t=P()},m(e,n){s.m(e,n),w(e,t,n)},p(e,o){l===(l=n(e))&&s?s.p(e,o):(s.d(1),s=l(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&y(t)}}}function vl(e){let t,n;return t=new dl({props:{label:e[1],hint:e[2],$$slots:{default:[hl,({id:e})=>({7:e}),({id:e})=>e?128:0]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},p(e,[n]){const l={};2&n&&(l.label=e[1]),4&n&&(l.hint=e[2]),409&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function bl(e,t,n){let{label:l=""}=t,{value:s=""}=t,{hint:o=""}=t,{size:r=14}=t,{multiline:a=!1}=t;return e.$$set=e=>{"label"in e&&n(1,l=e.label),"value"in e&&n(0,s=e.value),"hint"in e&&n(2,o=e.hint),"size"in e&&n(3,r=e.size),"multiline"in e&&n(4,a=e.multiline)},[s,l,o,r,a,function(){s=this.value,n(0,s)},function(){s=this.value,n(0,s)}]}class wl extends _e{constructor(e){super(),ke(this,e,bl,vl,r,{label:1,value:0,hint:2,size:3,multiline:4})}}function yl(e){let t,n,l,r;return{c(){t=k("input"),M(t,"id",n=e[19]),T(t,"width",e[5]+4+"ch"),M(t,"class","input"),M(t,"type","number"),M(t,"step",e[1]),M(t,"min",e[3]),M(t,"max",e[4]),t.value=e[0]},m(n,s){w(n,t,s),e[15](t),l||(r=[R(t,"focus",(function(){o(e[8]=e[0])&&(e[8]=e[0]).apply(this,arguments)})),R(t,"keydown",e[12]),R(t,"change",e[10]),R(t,"input",e[11]),R(t,"input",e[13]),R(t,"change",e[14])],l=!0)},p(l,s){e=l,524288&s&&n!==(n=e[19])&&M(t,"id",n),32&s&&T(t,"width",e[5]+4+"ch"),2&s&&M(t,"step",e[1]),8&s&&M(t,"min",e[3]),16&s&&M(t,"max",e[4]),1&s&&(t.value=e[0])},d(n){n&&y(t),e[15](null),l=!1,s(r)}}}function xl(e){let t,n;return t=new dl({props:{label:e[2],hint:e[6],warning:e[7],$$slots:{default:[yl,({id:e})=>({19:e}),({id:e})=>e?524288:0]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},p(e,[n]){const l={};4&n&&(l.label=e[2]),64&n&&(l.hint=e[6]),128&n&&(l.warning=e[7]),1573691&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function kl(e,t,n){let{label:l=""}=t,{value:s=0}=t,{min:o=0}=t,{max:r=1}=t,{step:a=1}=t,{size:c=1}=t,{hint:i=""}=t,{warning:u=""}=t;const $=a,f=10*a;let p,d=s;const m=e=>!isNaN(e)&&e>=o&&e<=r;return e.$$set=e=>{"label"in e&&n(2,l=e.label),"value"in e&&n(0,s=e.value),"min"in e&&n(3,o=e.min),"max"in e&&n(4,r=e.max),"step"in e&&n(1,a=e.step),"size"in e&&n(5,c=e.size),"hint"in e&&n(6,i=e.hint),"warning"in e&&n(7,u=e.warning)},[s,a,l,o,r,c,i,u,d,p,()=>{n(9,p.value=n(0,s=d),p)},e=>{const t=parseFloat(p.value);0===t&&p.value.length>1||!m(t)?e.stopImmediatePropagation():n(8,d=n(0,s=t))},e=>{e.shiftKey?n(1,a=f):n(1,a=$)},function(t){J(e,t)},function(t){J(e,t)},function(e){V[e?"unshift":"push"](()=>{p=e,n(9,p)})}]}class _l extends _e{constructor(e){super(),ke(this,e,kl,xl,r,{label:2,value:0,min:3,max:4,step:1,size:5,hint:6,warning:7})}}function zl(t){let n,l;return{c(){n=k("div"),l=k("canvas"),M(l,"class","inset svelte-r6l6gk"),M(n,"class","svelte-r6l6gk")},m(e,s){w(e,n,s),b(n,l),t[2](l)},p:e,i:e,o:e,d(e){e&&y(n),t[2](null)}}}function El(e,t,n){let l,s,o,r=!1,{data:a}=t;if("ResizeObserver"in window){const e=new ResizeObserver(e=>{for(const t of e){const{width:e,height:n}=t.contentRect;s=e,o=n,r||(r=!0,c(),setTimeout(()=>{c(),r=!1},500))}});B(()=>{e.observe(l.parentElement)}),H(()=>{e.unobserve(l.parentElement)})}else B(()=>{s=l.parentElement.clientWidth,o=l.parentElement.clientHeight});const c=()=>{if(!l)return;const e=l.getContext("2d");n(0,l.height=o,l),n(0,l.width=s,l),e.strokeStyle="#0004",e.beginPath(),e.moveTo(0,o/2-.5),e.lineTo(s,o/2-.5),e.stroke(),e.closePath(),e.strokeStyle="#062",e.beginPath();for(let t=0;t<s;t+=2){const n=t*(a.length/s)|0,l=(.5+a[n])*o|0;0===t?e.moveTo(0,l):e.lineTo(t-.5,l)}e.stroke(),e.closePath()};return e.$$set=e=>{"data"in e&&n(1,a=e.data)},e.$$.update=()=>{2&e.$$.dirty&&a&&c()},[l,a,function(e){V[e?"unshift":"push"](()=>{l=e,n(0,l)})}]}class Pl extends _e{constructor(e){super(),ke(this,e,El,zl,r,{data:1})}}var Rl=Object.freeze({__proto__:null,hihat:[2,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],claps:[1,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1],bassDrum:[1,0,84,,,.1,,.7,,,,.5,,6.7,1,.05],bassDrum2:[3,0,43,0,,.25,,,,,,,,2],snare:[1,0,655,0,,.09,3,1.65,,,,,.02,3.8,-.1,,.2],snare2:[1,0,219,,,,,1.1,,-.1,-50,-.05,-.01,1],hihatOpen:[.8,0,2100,,,.2,3,3,,,-400,,,2],shaker:[.3,0,900,.02,,.07,4,0,,,,,,4]});var Ml=Object.freeze({__proto__:null,korgBass:[.7,0,22,,.07,.07,2,0,,,.5,.01],korgFilter:[,0,245,0,0,.48,2,,0,0,0,,,,0,.02,.01],piano:[.5,0,196,,.08,.5,3],ringPiano:[.75,0,196,0,.08,.18,3],polySynth:[,0,25,.002,.02,.08,3,,,,,,,,,.1,.01],synthBrass:[.9,0,143,,,.35,3,,,,,,,,,],hallBrass:[,0,232,.01,.09,.15,2,,,,,,154.87,,,,.26],digDug:[,0,23,,,.2,3,5,,,0]});var Sl=Object.freeze({__proto__:null,flute:[,0,740,0,,.15,2,.2,-.1,-.15,9,.02,,.1,.12,0,.06]});function Al(e,t,n){const l=e.slice();return l[9]=t[n],l}function Tl(e,t,n){const l=e.slice();return l[1]=t[n],l}function Cl(t){let n,l,s,o=t[1].label+"";return{c(){n=k("option"),l=z(o),n.__value=s=t[1],n.value=n.__value},m(e,t){w(e,n,t),b(n,l)},p:e,d(e){e&&y(n)}}}function jl(e,t){let n,l,s,o=t[9].name+"";return{key:e,first:null,c(){n=k("option"),l=z(o),n.__value=s=t[9],n.value=n.__value,this.first=n},m(e,t){w(e,n,t),b(n,l)},p(e,t){2&t&&o!==(o=e[9].name+"")&&S(l,o),6&t&&s!==(s=e[9])&&(n.__value=s,n.value=n.__value)},d(e){e&&y(n)}}}function Ll(e){let t,n,l,o,r,a,c,i,u,$,f,p,d,m=[],g=new Map,h=e[2],v=[];for(let t=0;t<h.length;t+=1)v[t]=Cl(Tl(e,h,t));let _=e[1].instruments;const z=e=>e[9];for(let t=0;t<_.length;t+=1){let n=Al(e,_,t),l=z(n);g.set(l,m[t]=jl(l,n))}return $=new Pn({props:{label:"Apply",disabled:!e[0]}}),$.$on("click",e[4]),{c(){t=k("div"),n=k("div"),l=k("div"),o=k("select");for(let e=0;e<v.length;e+=1)v[e].c();r=E(),a=k("div"),c=k("select");for(let e=0;e<m.length;e+=1)m[e].c();i=E(),u=k("div"),we($.$$.fragment),M(o,"class","select svelte-13ffdet"),M(o,"size","2"),void 0===e[1]&&te(()=>e[5].call(o)),M(l,"class","inset"),M(c,"class","select svelte-13ffdet"),M(c,"size","2"),void 0===e[0]&&te(()=>e[6].call(c)),M(a,"class","inset"),M(n,"class","splitView svelte-13ffdet"),M(t,"class","wrap svelte-13ffdet")},m(s,g){w(s,t,g),b(t,n),b(n,l),b(l,o);for(let e=0;e<v.length;e+=1)v[e].m(o,null);C(o,e[1]),b(n,r),b(n,a),b(a,c);for(let e=0;e<m.length;e+=1)m[e].m(c,null);C(c,e[0]),b(t,i),b(t,u),ye($,u,null),f=!0,p||(d=[R(o,"change",e[5]),R(c,"change",e[6]),R(c,"change",e[3])],p=!0)},p(e,[t]){if(4&t){let n;for(h=e[2],n=0;n<h.length;n+=1){const l=Tl(e,h,n);v[n]?v[n].p(l,t):(v[n]=Cl(l),v[n].c(),v[n].m(o,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=h.length}if(6&t&&C(o,e[1]),2&t){const n=e[1].instruments;m=function(e,t,n,l,s,o,r,a,c,i,u,$){let f=e.length,p=o.length,d=f;const m={};for(;d--;)m[e[d].key]=d;const g=[],h=new Map,v=new Map;for(d=p;d--;){const e=$(s,o,d),a=n(e);let c=r.get(a);c?l&&c.p(e,t):(c=i(a,e),c.c()),h.set(a,g[d]=c),a in m&&v.set(a,Math.abs(d-m[a]))}const b=new Set,w=new Set;function y(e){pe(e,1),e.m(a,u),r.set(e.key,e),u=e.first,p--}for(;f&&p;){const t=g[p-1],n=e[f-1],l=t.key,s=n.key;t===n?(u=t.first,f--,p--):h.has(s)?!r.has(l)||b.has(l)?y(t):w.has(s)?f--:v.get(l)>v.get(s)?(w.add(l),y(t)):(b.add(s),f--):(c(n,r),f--)}for(;f--;){const t=e[f];h.has(t.key)||c(t,r)}for(;p;)y(g[p-1]);return g}(m,t,z,1,e,n,g,c,ve,jl,null,Al)}3&t&&C(c,e[0]);const n={};1&t&&(n.disabled=!e[0]),$.$set(n)},i(e){f||(pe($.$$.fragment,e),f=!0)},o(e){de($.$$.fragment,e),f=!1},d(e){e&&y(t),x(v,e);for(let e=0;e<m.length;e+=1)m[e].d();xe($),p=!1,s(d)}}}function Nl(e,t,n){const l=G(),s=e=>e.substr(0,1).toUpperCase()+e.substr(1).replace(/[A-Z0-9]/g," $&"),o=Object.entries({percussion:Rl,keyboards:Ml,wind:Sl}).map(([e,t])=>({label:s(e),instruments:Object.entries(t).map(([e,t])=>({name:s(e),params:t}))}));let r=o[0],a=null;return[a,r,o,()=>{var e;a&&(e=a.params,vn(zzfxG(...e)))},()=>{l("apply",a)},function(){r=j(this),n(1,r),n(2,o)},function(){a=j(this),n(0,a),n(1,r)}]}class Ol extends _e{constructor(e){super(),ke(this,e,Nl,Ll,r,{})}}function Dl(e){const t=e-1;return t*t*t+1}function ql(e,{delay:n=0,duration:l=400,easing:s=t}){const o=+getComputedStyle(e).opacity;return{delay:n,duration:l,easing:s,css:e=>"opacity: "+e*o}}function Il(e,{delay:t=0,duration:n=400,easing:l=Dl,x:s=0,y:o=0,opacity:r=0}){const a=getComputedStyle(e),c=+a.opacity,i="none"===a.transform?"":a.transform,u=c*(1-r);return{delay:t,duration:n,easing:l,css:(e,t)=>`\n\t\t\ttransform: ${i} translate(${(1-e)*s}px, ${(1-e)*o}px);\n\t\t\topacity: ${c-u*t}`}}function Ul(e){let t,n,l,s,o,r,a,c,i,$,p,d;c=new Pn({props:{label:"×"}}),c.$on("click",e[3]);const m=e[5].default,g=u(m,e,e[4],null);return{c(){t=k("div"),l=E(),s=k("dialog"),o=k("div"),r=z(e[1]),a=E(),we(c.$$.fragment),i=E(),$=k("div"),g&&g.c(),M(t,"class","overlay svelte-13vjt2x"),M(o,"class","modal__header outset embossed svelte-13vjt2x"),M($,"class","modal__body outset svelte-13vjt2x"),M(s,"class","modal svelte-13vjt2x")},m(e,n){w(e,t,n),w(e,l,n),w(e,s,n),b(s,o),b(o,r),b(o,a),ye(c,o,null),b(s,i),b(s,$),g&&g.m($,null),d=!0},p(e,t){(!d||2&t)&&S(r,e[1]),g&&g.p&&16&t&&f(g,m,e,e[4],t,null,null)},i(e){d||(te(()=>{n||(n=ge(t,ql,{duration:150},!0)),n.run(1)}),pe(c.$$.fragment,e),pe(g,e),te(()=>{p||(p=ge(s,Il,{duration:150,y:10},!0)),p.run(1)}),d=!0)},o(e){n||(n=ge(t,ql,{duration:150},!1)),n.run(0),de(c.$$.fragment,e),de(g,e),p||(p=ge(s,Il,{duration:150,y:10},!1)),p.run(0),d=!1},d(e){e&&y(t),e&&n&&n.end(),e&&y(l),e&&y(s),xe(c),g&&g.d(e),e&&p&&p.end()}}}function Fl(e){let t,n,l,s,o=e[0]&&Ul(e);return{c(){o&&o.c(),t=P()},m(r,a){o&&o.m(r,a),w(r,t,a),n=!0,l||(s=R(window,"keydown",e[2]),l=!0)},p(e,[n]){e[0]?o?(o.p(e,n),1&n&&pe(o,1)):(o=Ul(e),o.c(),pe(o,1),o.m(t.parentNode,t)):o&&($e(),de(o,1,1,()=>{o=null}),fe())},i(e){n||(pe(o),n=!0)},o(e){de(o),n=!1},d(e){o&&o.d(e),e&&y(t),l=!1,s()}}}function Xl(e,t,n){let{open:l=!1}=t,{title:s=""}=t;const o=()=>{n(0,l=!1)};let{$$slots:r={},$$scope:a}=t;return e.$$set=e=>{"open"in e&&n(0,l=e.open),"title"in e&&n(1,s=e.title),"$$scope"in e&&n(4,a=e.$$scope)},[l,s,e=>{l&&"Escape"===e.key&&(o(),e.preventDefault())},o,a,r]}class Bl extends _e{constructor(e){super(),ke(this,e,Xl,Fl,r,{open:0,title:1})}}function Hl(e,t,n){const l=e.slice();return l[52]=t[n],l}function Gl(e,t,n){const l=e.slice();return l[55]=t[n],l}function Jl(e,t,n){const l=e.slice();return l[9]=t[n],l[59]=n,l}function Kl(e){let t,n,l,s,o,r,a,c;return t=new Pn({props:{label:"Add"}}),t.$on("click",e[16]),l=new Pn({props:{label:"Delete",disabled:e[7].length}}),l.$on("click",e[17]),o=new Pn({props:{label:"Copy"}}),o.$on("click",e[20]),a=new Pn({props:{label:"Paste",disabled:!e[1]}}),a.$on("click",e[21]),{c(){we(t.$$.fragment),n=E(),we(l.$$.fragment),s=E(),we(o.$$.fragment),r=E(),we(a.$$.fragment)},m(e,i){ye(t,e,i),w(e,n,i),ye(l,e,i),w(e,s,i),ye(o,e,i),w(e,r,i),ye(a,e,i),c=!0},p(e,t){const n={};128&t[0]&&(n.disabled=e[7].length),l.$set(n);const s={};2&t[0]&&(s.disabled=!e[1]),a.$set(s)},i(e){c||(pe(t.$$.fragment,e),pe(l.$$.fragment,e),pe(o.$$.fragment,e),pe(a.$$.fragment,e),c=!0)},o(e){de(t.$$.fragment,e),de(l.$$.fragment,e),de(o.$$.fragment,e),de(a.$$.fragment,e),c=!1},d(e){xe(t,e),e&&y(n),xe(l,e),e&&y(s),xe(o,e),e&&y(r),xe(a,e)}}}function Vl(e){let t,n;return t=new _n({props:{label:"Instruments",$$slots:{default:[Kl]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},p(e,n){const l={};130&n[0]|536870912&n[1]&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Yl(e){let t,n,l;return n=new Cn({props:{$$slots:{default:[Vl]},$$scope:{ctx:e}}}),{c(){t=k("div"),we(n.$$.fragment),M(t,"slot","head")},m(e,s){w(e,t,s),ye(n,t,null),l=!0},p(e,t){const l={};130&t[0]|536870912&t[1]&&(l.$$scope={dirty:t,ctx:e}),n.$set(l)},i(e){l||(pe(n.$$.fragment,e),l=!0)},o(e){de(n.$$.fragment,e),l=!1},d(e){e&&y(t),xe(n)}}}function Zl(e){let t,n,l,s,o,r=e[9]+"";return{c(){t=k("option"),n=z(e[59]),l=z(": "),s=z(r),t.__value=o=e[59],t.value=t.__value},m(e,o){w(e,t,o),b(t,n),b(t,l),b(t,s)},p(e,t){256&t[0]&&r!==(r=e[9]+"")&&S(s,r)},d(e){e&&y(t)}}}function Wl(t){let n,l,s,o,r=t[8],a=[];for(let e=0;e<r.length;e+=1)a[e]=Zl(Jl(t,r,e));return{c(){n=E(),l=k("select");for(let e=0;e<a.length;e+=1)a[e].c();M(l,"class","select"),M(l,"size","2"),void 0===t[0]&&te(()=>t[22].call(l))},m(e,r){w(e,n,r),w(e,l,r);for(let e=0;e<a.length;e+=1)a[e].m(l,null);C(l,t[0]),s||(o=R(l,"change",t[22]),s=!0)},p(e,t){if(256&t[0]){let n;for(r=e[8],n=0;n<r.length;n+=1){const s=Jl(e,r,n);a[n]?a[n].p(s,t):(a[n]=Zl(s),a[n].c(),a[n].m(l,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=r.length}1&t[0]&&C(l,e[0])},i:e,o:e,d(e){e&&y(n),e&&y(l),x(a,e),s=!1,o()}}}function Ql(t){let n,l,s,o=t[55].label+"";return{c(){n=k("option"),l=z(o),n.__value=s=t[55].id,n.value=n.__value},m(e,t){w(e,n,t),b(n,l)},p:e,d(e){e&&y(n)}}}function es(e){let t,n,l,s,o,r,a,c,i;t=new Pn({props:{label:"Play"}}),t.$on("click",e[12]);let u=e[10],$=[];for(let t=0;t<u.length;t+=1)$[t]=Ql(Gl(e,u,t));function f(t){e[26].call(null,t)}let p={hint:"Automatically play when changing properties",label:"Auto Play"};return void 0!==e[3]&&(p.checked=e[3]),o=new tl({props:p}),V.push(()=>be(o,"checked",f)),{c(){we(t.$$.fragment),n=E(),l=k("select");for(let e=0;e<$.length;e+=1)$[e].c();s=E(),we(o.$$.fragment),M(l,"class","select"),void 0===e[4]&&te(()=>e[25].call(l))},m(r,u){ye(t,r,u),w(r,n,u),w(r,l,u);for(let e=0;e<$.length;e+=1)$[e].m(l,null);C(l,e[4]),w(r,s,u),ye(o,r,u),a=!0,c||(i=R(l,"change",e[25]),c=!0)},p(e,t){if(1024&t[0]){let n;for(u=e[10],n=0;n<u.length;n+=1){const s=Gl(e,u,n);$[n]?$[n].p(s,t):($[n]=Ql(s),$[n].c(),$[n].m(l,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=u.length}1040&t[0]&&C(l,e[4]);const n={};!r&&8&t[0]&&(r=!0,n.checked=e[3],ne(()=>r=!1)),o.$set(n)},i(e){a||(pe(t.$$.fragment,e),pe(o.$$.fragment,e),a=!0)},o(e){de(t.$$.fragment,e),de(o.$$.fragment,e),a=!1},d(e){xe(t,e),e&&y(n),e&&y(l),x($,e),e&&y(s),xe(o,e),c=!1,i()}}}function ts(t){let n,l,s,o,r,a;return n=new Pn({props:{label:"Import"}}),n.$on("click",t[14]),s=new Pn({props:{label:"Export"}}),s.$on("click",t[15]),r=new Pn({props:{label:"Library"}}),r.$on("click",t[18]),{c(){we(n.$$.fragment),l=E(),we(s.$$.fragment),o=E(),we(r.$$.fragment)},m(e,t){ye(n,e,t),w(e,l,t),ye(s,e,t),w(e,o,t),ye(r,e,t),a=!0},p:e,i(e){a||(pe(n.$$.fragment,e),pe(s.$$.fragment,e),pe(r.$$.fragment,e),a=!0)},o(e){de(n.$$.fragment,e),de(s.$$.fragment,e),de(r.$$.fragment,e),a=!1},d(e){xe(n,e),e&&y(l),xe(s,e),e&&y(o),xe(r,e)}}}function ns(e){let t,n,l=(e[7].length?e[7]:"Unused")+"";return{c(){t=k("span"),n=z(l),M(t,"class","usage output svelte-7qfu5x")},m(e,l){w(e,t,l),b(t,n)},p(e,t){128&t[0]&&l!==(l=(e[7].length?e[7]:"Unused")+"")&&S(n,l)},d(e){e&&y(t)}}}function ls(e){let t,n,l,s,o,r,a,c,i,u,$,f,p,d;function m(t){e[23].call(null,t)}let g={min:0,max:e[5].length-1,label:"#"};function h(t){e[24].call(null,t)}void 0!==e[0]&&(g.value=e[0]),t=new _l({props:g}),V.push(()=>be(t,"value",m));let v={label:"Name"};return void 0!==e[8][e[0]]&&(v.value=e[8][e[0]]),s=new wl({props:v}),V.push(()=>be(s,"value",h)),a=new _n({props:{label:"Playback",$$slots:{default:[es]},$$scope:{ctx:e}}}),i=new _n({props:{label:"Parameters",$$slots:{default:[ts]},$$scope:{ctx:e}}}),$=new _n({props:{label:"Pattern Usage",$$slots:{default:[ns]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment),l=E(),we(s.$$.fragment),r=E(),we(a.$$.fragment),c=E(),we(i.$$.fragment),u=E(),we($.$$.fragment),f=E(),p=k("div"),M(p,"class","outset")},m(e,n){ye(t,e,n),w(e,l,n),ye(s,e,n),w(e,r,n),ye(a,e,n),w(e,c,n),ye(i,e,n),w(e,u,n),ye($,e,n),w(e,f,n),w(e,p,n),d=!0},p(e,l){const r={};32&l[0]&&(r.max=e[5].length-1),!n&&1&l[0]&&(n=!0,r.value=e[0],ne(()=>n=!1)),t.$set(r);const c={};!o&&257&l[0]&&(o=!0,c.value=e[8][e[0]],ne(()=>o=!1)),s.$set(c);const u={};24&l[0]|536870912&l[1]&&(u.$$scope={dirty:l,ctx:e}),a.$set(u);const f={};536870912&l[1]&&(f.$$scope={dirty:l,ctx:e}),i.$set(f);const p={};128&l[0]|536870912&l[1]&&(p.$$scope={dirty:l,ctx:e}),$.$set(p)},i(e){d||(pe(t.$$.fragment,e),pe(s.$$.fragment,e),pe(a.$$.fragment,e),pe(i.$$.fragment,e),pe($.$$.fragment,e),d=!0)},o(e){de(t.$$.fragment,e),de(s.$$.fragment,e),de(a.$$.fragment,e),de(i.$$.fragment,e),de($.$$.fragment,e),d=!1},d(e){xe(t,e),e&&y(l),xe(s,e),e&&y(r),xe(a,e),e&&y(c),xe(i,e),e&&y(u),xe($,e),e&&y(f),e&&y(p)}}}function ss(e){let t,n,l;return n=new Cn({props:{$$slots:{default:[ls]},$$scope:{ctx:e}}}),{c(){t=k("div"),we(n.$$.fragment),M(t,"slot","head")},m(e,s){w(e,t,s),ye(n,t,null),l=!0},p(e,t){const l={};441&t[0]|536870912&t[1]&&(l.$$scope={dirty:t,ctx:e}),n.$set(l)},i(e){l||(pe(n.$$.fragment,e),l=!0)},o(e){de(n.$$.fragment,e),l=!1},d(e){e&&y(t),xe(n)}}}function os(t){let n,l,s,o=t[52].label+"";return{c(){n=k("option"),l=z(o),n.__value=s=t[52].id,n.value=n.__value},m(e,t){w(e,n,t),b(n,l)},p:e,d(e){e&&y(n)}}}function rs(e){let t,n,l,o=e[11],r=[];for(let t=0;t<o.length;t+=1)r[t]=os(Hl(e,o,t));return{c(){t=k("select");for(let e=0;e<r.length;e+=1)r[e].c();M(t,"class","select"),void 0===e[9][6]&&te(()=>e[29].call(t))},m(s,o){w(s,t,o);for(let e=0;e<r.length;e+=1)r[e].m(t,null);C(t,e[9][6]),n||(l=[R(t,"input",e[13]),R(t,"change",e[29])],n=!0)},p(e,n){if(2048&n[0]){let l;for(o=e[11],l=0;l<o.length;l+=1){const s=Hl(e,o,l);r[l]?r[l].p(s,n):(r[l]=os(s),r[l].c(),r[l].m(t,null))}for(;l<r.length;l+=1)r[l].d(1);r.length=o.length}2560&n[0]&&C(t,e[9][6])},d(e){e&&y(t),x(r,e),n=!1,s(l)}}}function as(e){let t,n,l,s,o,r,a,c,i,u,$,f,p,d,m,g,h,v,x,_,z,P,R,S,A,T,C,j,L,N,O,D,q,I,U,F,X,B,H,G,J,K,Y,Z,W,Q,ee,te,le,se,oe,re,ae,ce,ie,ue,$e,fe,me,ge,he,ve,ke,_e,ze,Ee;function Pe(t){e[27].call(null,t)}let Re={size:4,label:"Volume",hint:"Volume scale (percent)",min:"0",max:"1000000000",step:"0.1"};function Me(t){e[28].call(null,t)}void 0!==e[9][0]&&(Re.value=e[9][0]),s=new _l({props:Re}),V.push(()=>be(s,"value",Pe)),s.$on("input",e[13]);let Se={size:4,label:"Frequency",hint:"Frequency of sound (Hz)",min:"-1000000000",max:"1000000000",step:"1"};function Ae(t){e[30].call(null,t)}void 0!==e[9][2]&&(Se.value=e[9][2]),a=new _l({props:Se}),V.push(()=>be(a,"value",Me)),a.$on("input",e[13]),u=new dl({props:{label:"Shape",$$slots:{default:[rs]},$$scope:{ctx:e}}});let Te={size:4,label:"Attack",hint:"Attack time, how fast sound starts (seconds)",min:"0",max:"3",step:"0.01"};function Ce(t){e[31].call(null,t)}void 0!==e[9][3]&&(Te.value=e[9][3]),f=new _l({props:Te}),V.push(()=>be(f,"value",Ae)),f.$on("input",e[13]);let je={size:4,label:"Sustain",hint:"Sustain time, how long sound holds (seconds)",min:"0",max:"3",step:"0.01"};function Le(t){e[32].call(null,t)}void 0!==e[9][4]&&(je.value=e[9][4]),m=new _l({props:je}),V.push(()=>be(m,"value",Ce)),m.$on("input",e[13]);let Ne={size:4,label:"Release",hint:"Release time, how fast sound fades out (seconds)",min:"0",max:"3",step:"0.01"};function Oe(t){e[33].call(null,t)}void 0!==e[9][5]&&(Ne.value=e[9][5]),v=new _l({props:Ne}),V.push(()=>be(v,"value",Le)),v.$on("input",e[13]);let De={size:4,label:"Shape Curve",hint:"Squarenes of wave (0=square, 1=normal, 2=pointy)",min:"0",max:"1000000000",step:"0.1"};function qe(t){e[34].call(null,t)}void 0!==e[9][7]&&(De.value=e[9][7]),z=new _l({props:De}),V.push(()=>be(z,"value",Oe)),z.$on("input",e[13]);let Ie={size:4,label:"Slide",hint:"How much to slide frequency (kHz/s)",min:"-1000000000",max:"1000000000",step:"0.1"};function Ue(t){e[35].call(null,t)}void 0!==e[9][8]&&(Ie.value=e[9][8]),S=new _l({props:Ie}),V.push(()=>be(S,"value",qe)),S.$on("input",e[13]);let Fe={size:4,label:"Delta Slide",hint:"How much to change slide (kHz/s/s)",min:"-1000000000",max:"1000000000",step:"0.1"};function Xe(t){e[36].call(null,t)}void 0!==e[9][9]&&(Fe.value=e[9][9]),C=new _l({props:Fe}),V.push(()=>be(C,"value",Ue)),C.$on("input",e[13]);let Be={size:4,label:"Pitch Jump",hint:"Frequency of pitch jump (Hz)",min:"-1000000000",max:"1000000000",step:"10"};function He(t){e[37].call(null,t)}void 0!==e[9][10]&&(Be.value=e[9][10]),N=new _l({props:Be}),V.push(()=>be(N,"value",Xe)),N.$on("input",e[13]);let Ge={size:4,label:"Pitch Jump Time",hint:"Time of pitch jump (seconds)",min:"-1000000000",max:"1000000000",step:"0.01"};function Je(t){e[38].call(null,t)}void 0!==e[9][11]&&(Ge.value=e[9][11]),q=new _l({props:Ge}),V.push(()=>be(q,"value",He)),q.$on("input",e[13]);let Ke={size:4,label:"Repeat Time",hint:"Resets some parameters periodically (seconds)",min:"-1000000000",max:"1000000000",step:"0.01"};function Ve(t){e[39].call(null,t)}void 0!==e[9][12]&&(Ke.value=e[9][12]),F=new _l({props:Ke}),V.push(()=>be(F,"value",Je)),F.$on("input",e[13]);let Ye={size:4,label:"Noise",hint:"How much random noise to add (percent)",min:"-1000000000",max:"1000000000",step:"0.1"};function Ze(t){e[40].call(null,t)}void 0!==e[9][13]&&(Ye.value=e[9][13]),H=new _l({props:Ye}),V.push(()=>be(H,"value",Ve)),H.$on("input",e[13]);let We={size:4,label:"Modulation",hint:"Frequency of modulation wave, negative flips phase (Hz)",min:"-1000000000",max:"1000000000",step:"0.1"};function Qe(t){e[41].call(null,t)}void 0!==e[9][14]&&(We.value=e[9][14]),K=new _l({props:We}),V.push(()=>be(K,"value",Ze)),K.$on("input",e[13]);let et={size:4,label:"Bit Crush",hint:"Resamples at a lower frequency in (samples*100)",min:"-1000000000",max:"1000000000",step:"0.1"};function tt(t){e[42].call(null,t)}void 0!==e[9][15]&&(et.value=e[9][15]),W=new _l({props:et}),V.push(()=>be(W,"value",Qe)),W.$on("input",e[13]);let nt={size:4,label:"Delay",hint:"Overlap with itself for reverb and flanger effects (seconds)",min:"0",max:"1000000000",step:"0.01"};function lt(t){e[43].call(null,t)}void 0!==e[9][16]&&(nt.value=e[9][16]),te=new _l({props:nt}),V.push(()=>be(te,"value",tt)),te.$on("input",e[13]);let st={size:4,label:"Sustain Volume",hint:"Volume level for sustain (percent)",min:"0",max:"1000000000",step:"0.01"};function ot(t){e[44].call(null,t)}void 0!==e[9][17]&&(st.value=e[9][17]),oe=new _l({props:st}),V.push(()=>be(oe,"value",lt)),oe.$on("input",e[13]);let rt={size:4,label:"Decay",hint:"Decay time, how long to reach sustain after attack",min:"0",max:"1",step:"0.01"};function at(t){e[45].call(null,t)}void 0!==e[9][18]&&(rt.value=e[9][18]),ce=new _l({props:rt}),V.push(()=>be(ce,"value",ot)),ce.$on("input",e[13]);let ct={size:4,label:"Tremolo",hint:"Trembling effect, rate controlled by repeat time (precent)",min:"0",max:"1",step:"0.01"};return void 0!==e[9][19]&&(ct.value=e[9][19]),$e=new _l({props:ct}),V.push(()=>be($e,"value",at)),$e.$on("input",e[13]),ze=new Pl({props:{data:e[6]}}),{c(){t=E(),n=k("div"),l=k("div"),we(s.$$.fragment),r=E(),we(a.$$.fragment),i=E(),we(u.$$.fragment),$=E(),we(f.$$.fragment),d=E(),we(m.$$.fragment),h=E(),we(v.$$.fragment),_=E(),we(z.$$.fragment),R=E(),we(S.$$.fragment),T=E(),we(C.$$.fragment),L=E(),we(N.$$.fragment),D=E(),we(q.$$.fragment),U=E(),we(F.$$.fragment),B=E(),we(H.$$.fragment),J=E(),we(K.$$.fragment),Z=E(),we(W.$$.fragment),ee=E(),we(te.$$.fragment),se=E(),we(oe.$$.fragment),ae=E(),we(ce.$$.fragment),ue=E(),we($e.$$.fragment),me=E(),ge=k("div"),he=E(),ve=k("div"),ke=E(),_e=k("div"),we(ze.$$.fragment),M(ge,"class","outset"),M(ve,"class","outset"),M(l,"class","instrument__params svelte-7qfu5x"),M(_e,"class","instrument__preview outset svelte-7qfu5x"),M(n,"class","instrument svelte-7qfu5x")},m(e,o){w(e,t,o),w(e,n,o),b(n,l),ye(s,l,null),b(l,r),ye(a,l,null),b(l,i),ye(u,l,null),b(l,$),ye(f,l,null),b(l,d),ye(m,l,null),b(l,h),ye(v,l,null),b(l,_),ye(z,l,null),b(l,R),ye(S,l,null),b(l,T),ye(C,l,null),b(l,L),ye(N,l,null),b(l,D),ye(q,l,null),b(l,U),ye(F,l,null),b(l,B),ye(H,l,null),b(l,J),ye(K,l,null),b(l,Z),ye(W,l,null),b(l,ee),ye(te,l,null),b(l,se),ye(oe,l,null),b(l,ae),ye(ce,l,null),b(l,ue),ye($e,l,null),b(l,me),b(l,ge),b(l,he),b(l,ve),b(n,ke),b(n,_e),ye(ze,_e,null),Ee=!0},p(e,t){const n={};!o&&512&t[0]&&(o=!0,n.value=e[9][0],ne(()=>o=!1)),s.$set(n);const l={};!c&&512&t[0]&&(c=!0,l.value=e[9][2],ne(()=>c=!1)),a.$set(l);const r={};512&t[0]|536870912&t[1]&&(r.$$scope={dirty:t,ctx:e}),u.$set(r);const i={};!p&&512&t[0]&&(p=!0,i.value=e[9][3],ne(()=>p=!1)),f.$set(i);const $={};!g&&512&t[0]&&(g=!0,$.value=e[9][4],ne(()=>g=!1)),m.$set($);const d={};!x&&512&t[0]&&(x=!0,d.value=e[9][5],ne(()=>x=!1)),v.$set(d);const h={};!P&&512&t[0]&&(P=!0,h.value=e[9][7],ne(()=>P=!1)),z.$set(h);const b={};!A&&512&t[0]&&(A=!0,b.value=e[9][8],ne(()=>A=!1)),S.$set(b);const w={};!j&&512&t[0]&&(j=!0,w.value=e[9][9],ne(()=>j=!1)),C.$set(w);const y={};!O&&512&t[0]&&(O=!0,y.value=e[9][10],ne(()=>O=!1)),N.$set(y);const k={};!I&&512&t[0]&&(I=!0,k.value=e[9][11],ne(()=>I=!1)),q.$set(k);const _={};!X&&512&t[0]&&(X=!0,_.value=e[9][12],ne(()=>X=!1)),F.$set(_);const E={};!G&&512&t[0]&&(G=!0,E.value=e[9][13],ne(()=>G=!1)),H.$set(E);const R={};!Y&&512&t[0]&&(Y=!0,R.value=e[9][14],ne(()=>Y=!1)),K.$set(R);const M={};!Q&&512&t[0]&&(Q=!0,M.value=e[9][15],ne(()=>Q=!1)),W.$set(M);const T={};!le&&512&t[0]&&(le=!0,T.value=e[9][16],ne(()=>le=!1)),te.$set(T);const L={};!re&&512&t[0]&&(re=!0,L.value=e[9][17],ne(()=>re=!1)),oe.$set(L);const D={};!ie&&512&t[0]&&(ie=!0,D.value=e[9][18],ne(()=>ie=!1)),ce.$set(D);const U={};!fe&&512&t[0]&&(fe=!0,U.value=e[9][19],ne(()=>fe=!1)),$e.$set(U);const B={};64&t[0]&&(B.data=e[6]),ze.$set(B)},i(e){Ee||(pe(s.$$.fragment,e),pe(a.$$.fragment,e),pe(u.$$.fragment,e),pe(f.$$.fragment,e),pe(m.$$.fragment,e),pe(v.$$.fragment,e),pe(z.$$.fragment,e),pe(S.$$.fragment,e),pe(C.$$.fragment,e),pe(N.$$.fragment,e),pe(q.$$.fragment,e),pe(F.$$.fragment,e),pe(H.$$.fragment,e),pe(K.$$.fragment,e),pe(W.$$.fragment,e),pe(te.$$.fragment,e),pe(oe.$$.fragment,e),pe(ce.$$.fragment,e),pe($e.$$.fragment,e),pe(ze.$$.fragment,e),Ee=!0)},o(e){de(s.$$.fragment,e),de(a.$$.fragment,e),de(u.$$.fragment,e),de(f.$$.fragment,e),de(m.$$.fragment,e),de(v.$$.fragment,e),de(z.$$.fragment,e),de(S.$$.fragment,e),de(C.$$.fragment,e),de(N.$$.fragment,e),de(q.$$.fragment,e),de(F.$$.fragment,e),de(H.$$.fragment,e),de(K.$$.fragment,e),de(W.$$.fragment,e),de(te.$$.fragment,e),de(oe.$$.fragment,e),de(ce.$$.fragment,e),de($e.$$.fragment,e),de(ze.$$.fragment,e),Ee=!1},d(e){e&&y(t),e&&y(n),xe(s),xe(a),xe(u),xe(f),xe(m),xe(v),xe(z),xe(S),xe(C),xe(N),xe(q),xe(F),xe(H),xe(K),xe(W),xe(te),xe(oe),xe(ce),xe($e),xe(ze)}}}function cs(t){let n,l;return n=new Ol({}),n.$on("apply",t[19]),{c(){we(n.$$.fragment)},m(e,t){ye(n,e,t),l=!0},p:e,i(e){l||(pe(n.$$.fragment,e),l=!0)},o(e){de(n.$$.fragment,e),l=!1},d(e){xe(n,e)}}}function is(e){let t,n,l,s,o,r,a,c;function i(t){e[46].call(null,t)}n=new Dn({props:{$$slots:{default:[Wl],head:[Yl]},$$scope:{ctx:e}}}),s=new Dn({props:{$$slots:{default:[as],head:[ss]},$$scope:{ctx:e}}});let u={title:"Select an instrument",$$slots:{default:[cs]},$$scope:{ctx:e}};return void 0!==e[2]&&(u.open=e[2]),r=new Bl({props:u}),V.push(()=>be(r,"open",i)),{c(){t=k("div"),we(n.$$.fragment),l=E(),we(s.$$.fragment),o=E(),we(r.$$.fragment),M(t,"class","splitView")},m(e,a){w(e,t,a),ye(n,t,null),b(t,l),ye(s,t,null),w(e,o,a),ye(r,e,a),c=!0},p(e,t){const l={};387&t[0]|536870912&t[1]&&(l.$$scope={dirty:t,ctx:e}),n.$set(l);const o={};1017&t[0]|536870912&t[1]&&(o.$$scope={dirty:t,ctx:e}),s.$set(o);const c={};536870912&t[1]&&(c.$$scope={dirty:t,ctx:e}),!a&&4&t[0]&&(a=!0,c.open=e[2],ne(()=>a=!1)),r.$set(c)},i(e){c||(pe(n.$$.fragment,e),pe(s.$$.fragment,e),pe(r.$$.fragment,e),c=!0)},o(e){de(n.$$.fragment,e),de(s.$$.fragment,e),de(r.$$.fragment,e),c=!1},d(e){e&&y(t),xe(n),xe(s),e&&y(o),xe(r,e)}}}function us(e,t,n){let l,s,o;i(e,Ne,e=>n(5,l=e)),i(e,De,e=>n(48,s=e)),i(e,Oe,e=>n(8,o=e));let{selected:r=0}=t;const a=new Array(36).fill(0).map((e,t)=>({id:t+1,label:At(t+2)})),c=[{id:0,label:"Sin"},{id:1,label:"Triangle"},{id:2,label:"Saw"},{id:3,label:"Tan"},{id:4,label:"Bit Noise"}];let u,$,f=!1,d=!0,m=13;const g=new WeakMap,h=(e,t)=>{if(t||!g.has(e)){const t=zzfxG(...e),n=Math.max(1,t.length/2e3|0),l=t.filter((e,t)=>t%n==0);g.set(e,l)}return g.get(e)},v=async(e,t)=>{$&&$.stop(),$=await hn(e,t)};let b,w,y;return e.$$set=e=>{"selected"in e&&n(0,r=e.selected)},e.$$.update=()=>{33&e.$$.dirty[0]&&n(0,r=xt(r,0,l.length-1)),33&e.$$.dirty[0]&&n(9,b=l[r]),512&e.$$.dirty[0]&&n(6,w=h(b)),1&e.$$.dirty[0]|131072&e.$$.dirty[1]&&n(7,y=s.map((e,t)=>e.some(e=>e[0]===r)&&t).filter(e=>!1!==e))},[r,u,f,d,m,l,w,y,o,b,a,c,()=>{v(r,m)},async()=>{d&&v(r,m),await(ee(),W),n(6,w=h(b,!0))},()=>{let e=prompt("Zzfx Code","zzfx(...[])");e&&(e=e.replace(/zzfx\(\.\.\.(\[[\w\W]*?\])\)/,"$1"),wt(r,(e=>ht(dt(e)))(e)))},()=>{prompt("Zzfx Code",`zzfx(...${lt(b)})`)},()=>{bt([1,0]),n(0,r=l.length-1)},()=>{var e;y.length>0?alert(`This instrument is being used in patterns ${y}.`):(e=r,Ne.update(t=>(t.splice(e,1),t)),Oe.update(t=>(t.splice(e,1),t)),De.update(t=>(t.forEach(t=>{t.forEach(t=>{t[0]>e&&t[0]--})}),t)),vt++,n(0,r=Math.min(r,l.length-1)))},()=>{n(2,f=!0)},e=>{wt(r,e.detail.params),p(Oe,o[r]=e.detail.name,o),n(2,f=!1)},()=>{n(1,u=b.slice())},()=>{p(Ne,l[r]=u.slice(),l),Ne.set(l)},function(){r=j(this),n(0,r),n(5,l)},function(e){r=e,n(0,r),n(5,l)},function(e){o[r]=e,Oe.set(o)},function(){m=j(this),n(4,m),n(10,a)},function(e){d=e,n(3,d)},function(e){b[0]=e,n(9,b),n(5,l),n(0,r)},function(e){b[2]=e,n(9,b),n(5,l),n(0,r)},function(){b[6]=j(this),n(9,b),n(5,l),n(0,r),n(11,c)},function(e){b[3]=e,n(9,b),n(5,l),n(0,r)},function(e){b[4]=e,n(9,b),n(5,l),n(0,r)},function(e){b[5]=e,n(9,b),n(5,l),n(0,r)},function(e){b[7]=e,n(9,b),n(5,l),n(0,r)},function(e){b[8]=e,n(9,b),n(5,l),n(0,r)},function(e){b[9]=e,n(9,b),n(5,l),n(0,r)},function(e){b[10]=e,n(9,b),n(5,l),n(0,r)},function(e){b[11]=e,n(9,b),n(5,l),n(0,r)},function(e){b[12]=e,n(9,b),n(5,l),n(0,r)},function(e){b[13]=e,n(9,b),n(5,l),n(0,r)},function(e){b[14]=e,n(9,b),n(5,l),n(0,r)},function(e){b[15]=e,n(9,b),n(5,l),n(0,r)},function(e){b[16]=e,n(9,b),n(5,l),n(0,r)},function(e){b[17]=e,n(9,b),n(5,l),n(0,r)},function(e){b[18]=e,n(9,b),n(5,l),n(0,r)},function(e){b[19]=e,n(9,b),n(5,l),n(0,r)},function(e){f=e,n(2,f)}]}class $s extends _e{constructor(e){super(),ke(this,e,us,is,r,{selected:0},[-1,-1])}}function fs(t){let n,l,o;return{c(){n=k("input"),M(n,"type","range"),M(n,"id",t[1]),M(n,"step",t[2]),M(n,"min",t[3]),M(n,"max",t[4]),M(n,"list",t[5]),M(n,"class","svelte-18srj1d")},m(e,s){w(e,n,s),A(n,t[0]),l||(o=[R(n,"change",t[6]),R(n,"input",t[6])],l=!0)},p(e,[t]){2&t&&M(n,"id",e[1]),4&t&&M(n,"step",e[2]),8&t&&M(n,"min",e[3]),16&t&&M(n,"max",e[4]),32&t&&M(n,"list",e[5]),1&t&&A(n,e[0])},i:e,o:e,d(e){e&&y(n),l=!1,s(o)}}}function ps(e,t,n){let{id:l=null}=t,{step:s=1}=t,{min:o=0}=t,{max:r=1}=t,{list:a=null}=t,{value:c}=t;return e.$$set=e=>{"id"in e&&n(1,l=e.id),"step"in e&&n(2,s=e.step),"min"in e&&n(3,o=e.min),"max"in e&&n(4,r=e.max),"list"in e&&n(5,a=e.list),"value"in e&&n(0,c=e.value)},[c,l,s,o,r,a,function(){c=function(e){return""===e?void 0:+e}(this.value),n(0,c)}]}class ds extends _e{constructor(e){super(),ke(this,e,ps,fs,r,{id:1,step:2,min:3,max:4,list:5,value:0})}}function ms(e){let t,n,l,s,o,r,a,c,i;function u(t){e[1].call(null,t)}let $={step:.1,min:-1,max:1,list:"stops"};return void 0!==e[0]&&($.value=e[0]),n=new ds({props:$}),V.push(()=>be(n,"value",u)),{c(){t=k("div"),we(n.$$.fragment),s=E(),o=k("datalist"),r=k("option"),a=k("option"),c=k("option"),r.__value="-1",r.value=r.__value,M(r,"label","L"),M(r,"class","svelte-9t6ytv"),a.__value="0",a.value=a.__value,M(a,"label","C"),M(a,"class","svelte-9t6ytv"),c.__value="1",c.value=c.__value,M(c,"label","R"),M(c,"class","svelte-9t6ytv"),M(o,"id","stops"),M(o,"class","svelte-9t6ytv")},m(e,l){w(e,t,l),ye(n,t,null),b(t,s),b(t,o),b(o,r),b(o,a),b(o,c),i=!0},p(e,[t]){const s={};!l&&1&t&&(l=!0,s.value=e[0],ne(()=>l=!1)),n.$set(s)},i(e){i||(pe(n.$$.fragment,e),i=!0)},o(e){de(n.$$.fragment,e),i=!1},d(e){e&&y(t),xe(n)}}}function gs(e,t,n){let{value:l=0}=t;return e.$$set=e=>{"value"in e&&n(0,l=e.value)},[l,function(e){l=e,n(0,l)}]}class hs extends _e{constructor(e){super(),ke(this,e,gs,ms,r,{value:0})}}function vs(e,t,n){const l=e.slice();return l[14]=t[n],l[16]=n,l}function bs(e){let t,n,l,s=e[14]+"";return{c(){t=k("option"),n=z(s),t.__value=l=e[16],t.value=t.__value},m(e,l){w(e,t,l),b(t,n)},p(e,t){16&t&&s!==(s=e[14]+"")&&S(n,s)},d(e){e&&y(t)}}}function ws(e){let t,n,l,s=e[4],o=[];for(let t=0;t<s.length;t+=1)o[t]=bs(vs(e,s,t));return{c(){t=k("select");for(let e=0;e<o.length;e+=1)o[e].c();M(t,"class","select svelte-15e8ux0"),void 0===e[0][0]&&te(()=>e[9].call(t))},m(s,r){w(s,t,r);for(let e=0;e<o.length;e+=1)o[e].m(t,null);C(t,e[0][0]),n||(l=R(t,"change",e[9]),n=!0)},p(e,n){if(16&n){let l;for(s=e[4],l=0;l<s.length;l+=1){const r=vs(e,s,l);o[l]?o[l].p(r,n):(o[l]=bs(r),o[l].c(),o[l].m(t,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}1&n&&C(t,e[0][0])},d(e){e&&y(t),x(o,e),n=!1,l()}}}function ys(e){let t,n;return t=new _n({props:{label:e[1],$$slots:{default:[ws]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},p(e,n){const l={};2&n&&(l.label=e[1]),131089&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function xs(e){let t,n,l,o,r,a,c,i,u,$,f,p,d,m=e[0].slice(2).map(e[5]).join("\n")+"";function g(t){e[10].call(null,t)}n=new Cn({props:{$$slots:{default:[ys]},$$scope:{ctx:e}}});let h={};return void 0!==e[0][1]&&(h.value=e[0][1]),u=new hs({props:h}),V.push(()=>be(u,"value",g)),{c(){t=k("div"),we(n.$$.fragment),l=E(),o=k("div"),r=k("pre"),a=z(m),c=E(),i=k("div"),we(u.$$.fragment),M(r,"class","notes svelte-15e8ux0"),T(r,"transform","translateY("+e[3]+")"),M(o,"class","noteList svelte-15e8ux0"),M(o,"tabindex","0"),M(i,"class","outset"),M(t,"class","channel svelte-15e8ux0"),L(t,"mute",e[2])},m(s,$){var m;w(s,t,$),ye(n,t,null),b(t,l),b(t,o),b(o,r),b(r,a),b(t,c),b(t,i),ye(u,i,null),f=!0,p||(d=[R(o,"wheel",e[6]),R(o,"touchstart",(m=e[7],function(e){return e.preventDefault(),m.call(this,e)}))],p=!0)},p(e,[l]){const s={};131091&l&&(s.$$scope={dirty:l,ctx:e}),n.$set(s),(!f||1&l)&&m!==(m=e[0].slice(2).map(e[5]).join("\n")+"")&&S(a,m),(!f||8&l)&&T(r,"transform","translateY("+e[3]+")");const o={};!$&&1&l&&($=!0,o.value=e[0][1],ne(()=>$=!1)),u.$set(o),4&l&&L(t,"mute",e[2])},i(e){f||(pe(n.$$.fragment,e),pe(u.$$.fragment,e),f=!0)},o(e){de(n.$$.fragment,e),de(u.$$.fragment,e),f=!1},d(e){e&&y(t),xe(n),xe(u),p=!1,s(d)}}}function ks(e,t,n){let l;i(e,Oe,e=>n(4,l=e));let{data:s=[]}=t,{title:o="Track"}=t,{selectedRow:r=0}=t,{mute:a=!1}=t,c=0;const u=()=>{Math.abs(c)>.2?(requestAnimationFrame(u),n(8,r+=c/4|0),c*=.85):c=0};let $,f;return e.$$set=e=>{"data"in e&&n(0,s=e.data),"title"in e&&n(1,o=e.title),"selectedRow"in e&&n(8,r=e.selectedRow),"mute"in e&&n(2,a=e.mute)},e.$$.update=()=>{256&e.$$.dirty&&n(3,$=18*-r+"px"),1&e.$$.dirty&&(f=s.length-3)},[s,o,a,$,l,e=>{const t=At([1+e|0]),n=e%1*100;return 0===n?t+" --":`${t} ${n.toFixed().padStart(2,"0")}`},e=>{const{deltaY:t,deltaMode:l}=e;if(0===l){n(8,r=xt(r+(t/4|0),0,f))}},e=>{if(e.targetTouches.length>1)return;const t=e.targetTouches[0].screenY,l=r;let s=t;c=0;const o=e=>{const o=e.targetTouches[0].screenY;c=s-o,n(8,r=xt(l-((o-t)/18|0),0,f)),s=o},a=e=>{Math.abs(s-t)<5?e.target.focus():Math.abs(c)>.1&&u(),window.removeEventListener("touchmove",o),window.removeEventListener("touchend",a)};window.addEventListener("touchmove",o),window.addEventListener("touchend",a)},r,function(){s[0]=j(this),n(0,s)},function(e){s[1]=e,n(0,s)}]}class _s extends _e{constructor(e){super(),ke(this,e,ks,xs,r,{data:0,title:1,selectedRow:8,mute:2})}}function zs(e,t,n){const l=e.slice();return l[2]=t[n],l}function Es(e){let t,n,l,s,o,r,a=e[2].toUpperCase()+"";return{c(){t=k("span"),n=z(a),l=E(),M(t,"tabindex","0"),M(t,"data-note",s=e[2]),M(t,"class","svelte-1pcmj8h")},m(s,a){w(s,t,a),b(t,n),b(t,l),o||(r=R(t,"mousedown",e[1]),o=!0)},p(e,l){1&l&&a!==(a=e[2].toUpperCase()+"")&&S(n,a),1&l&&s!==(s=e[2])&&M(t,"data-note",s)},d(e){e&&y(t),o=!1,r()}}}function Ps(t){let n,l=t[0],s=[];for(let e=0;e<l.length;e+=1)s[e]=Es(zs(t,l,e));return{c(){n=k("div");for(let e=0;e<s.length;e+=1)s[e].c();M(n,"class","svelte-1pcmj8h")},m(e,t){w(e,n,t);for(let e=0;e<s.length;e+=1)s[e].m(n,null)},p(e,[t]){if(3&t){let o;for(l=e[0],o=0;o<l.length;o+=1){const r=zs(e,l,o);s[o]?s[o].p(r,t):(s[o]=Es(r),s[o].c(),s[o].m(n,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},i:e,o:e,d(e){e&&y(n),x(s,e)}}}function Rs(e,t,n){let l;return n(0,l=Object.entries(ze).sort((e,t)=>e[1]-t[1]).map(([e])=>e)),[l,e=>{const{target:t,button:n}=e;if(0===n){t.focus();const e=new KeyboardEvent("keydown",{key:t.dataset.note});window.dispatchEvent(e)}}]}class Ms extends _e{constructor(e){super(),ke(this,e,Rs,Ps,r,{})}}function Ss(e,t,n){const l=e.slice();return l[47]=t[n],l[48]=t,l[49]=n,l}function As(e,t,n){const l=e.slice();return l[50]=t[n],l[49]=n,l}function Ts(e){let t,n,l,s,o,r,a,c;return t=new Pn({props:{label:"Add"}}),t.$on("click",e[15]),l=new Pn({props:{label:"Delete",disabled:e[10].length}}),l.$on("click",e[16]),o=new Pn({props:{label:"Copy"}}),o.$on("click",e[27]),a=new Pn({props:{label:"Paste",disabled:!e[5]}}),a.$on("click",e[28]),{c(){we(t.$$.fragment),n=E(),we(l.$$.fragment),s=E(),we(o.$$.fragment),r=E(),we(a.$$.fragment)},m(e,i){ye(t,e,i),w(e,n,i),ye(l,e,i),w(e,s,i),ye(o,e,i),w(e,r,i),ye(a,e,i),c=!0},p(e,t){const n={};1024&t[0]&&(n.disabled=e[10].length),l.$set(n);const s={};32&t[0]&&(s.disabled=!e[5]),a.$set(s)},i(e){c||(pe(t.$$.fragment,e),pe(l.$$.fragment,e),pe(o.$$.fragment,e),pe(a.$$.fragment,e),c=!0)},o(e){de(t.$$.fragment,e),de(l.$$.fragment,e),de(o.$$.fragment,e),de(a.$$.fragment,e),c=!1},d(e){xe(t,e),e&&y(n),xe(l,e),e&&y(s),xe(o,e),e&&y(r),xe(a,e)}}}function Cs(e){let t,n;return t=new _n({props:{label:"Patterns",$$slots:{default:[Ts]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},p(e,n){const l={};1056&n[0]|2097152&n[1]&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function js(e){let t,n,l;return n=new Cn({props:{$$slots:{default:[Cs]},$$scope:{ctx:e}}}),{c(){t=k("div"),we(n.$$.fragment),M(t,"slot","head")},m(e,s){w(e,t,s),ye(n,t,null),l=!0},p(e,t){const l={};1056&t[0]|2097152&t[1]&&(l.$$scope={dirty:t,ctx:e}),n.$set(l)},i(e){l||(pe(n.$$.fragment,e),l=!0)},o(e){de(n.$$.fragment,e),l=!1},d(e){e&&y(t),xe(n)}}}function Ls(e){let t,n,l,s,o,r,a,c=e[12][e[49]].includes(!0)?"[M]":"",i=e[13][e[49]]+"";return{c(){t=k("option"),n=z(e[49]),l=z(": "),s=z(c),o=E(),r=z(i),t.__value=a=e[49],t.value=t.__value},m(e,a){w(e,t,a),b(t,n),b(t,l),b(t,s),b(t,o),b(t,r)},p(e,t){4096&t[0]&&c!==(c=e[12][e[49]].includes(!0)?"[M]":"")&&S(s,c),8192&t[0]&&i!==(i=e[13][e[49]]+"")&&S(r,i)},d(e){e&&y(t)}}}function Ns(t){let n,l,o,r,a=t[8],c=[];for(let e=0;e<a.length;e+=1)c[e]=Ls(As(t,a,e));return{c(){n=E(),l=k("select");for(let e=0;e<c.length;e+=1)c[e].c();M(l,"class","select svelte-1v8sxgp"),M(l,"size","2"),void 0===t[2]&&te(()=>t[34].call(l))},m(e,s){w(e,n,s),w(e,l,s);for(let e=0;e<c.length;e+=1)c[e].m(l,null);C(l,t[2]),o||(r=[R(l,"input",t[29]),R(l,"change",t[34])],o=!0)},p(e,t){if(12544&t[0]){let n;for(a=e[8],n=0;n<a.length;n+=1){const s=As(e,a,n);c[n]?c[n].p(s,t):(c[n]=Ls(s),c[n].c(),c[n].m(l,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=a.length}4&t[0]&&C(l,e[2])},i:e,o:e,d(e){e&&y(n),e&&y(l),x(c,e),o=!1,s(r)}}}function Os(e){let t,n;return t=new Sn({props:{playing:e[11],keyboard:"ENTER"}}),t.$on("click",e[30]),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},p(e,n){const l={};2048&n[0]&&(l.playing=e[11]),t.$set(l)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Ds(e){let t,n,l,s,o,r,a,c,i,u,$,f,p,d;return t=new Pn({props:{label:"Add"}}),t.$on("click",e[22]),l=new Pn({props:{disabled:1===e[9],label:"Delete"}}),l.$on("click",e[23]),o=new Pn({props:{label:"Clear"}}),o.$on("click",e[24]),a=new Pn({props:{label:"Copy"}}),a.$on("click",e[25]),i=new Pn({props:{disabled:!e[4],label:"Paste"}}),i.$on("click",e[26]),$=new Pn({props:{disabled:1===e[9]||0===e[0],label:"Move Left"}}),$.$on("click",e[20]),p=new Pn({props:{disabled:1===e[9]||e[0]===e[9]-1,label:"Move Right"}}),p.$on("click",e[21]),{c(){we(t.$$.fragment),n=E(),we(l.$$.fragment),s=E(),we(o.$$.fragment),r=E(),we(a.$$.fragment),c=E(),we(i.$$.fragment),u=E(),we($.$$.fragment),f=E(),we(p.$$.fragment)},m(e,m){ye(t,e,m),w(e,n,m),ye(l,e,m),w(e,s,m),ye(o,e,m),w(e,r,m),ye(a,e,m),w(e,c,m),ye(i,e,m),w(e,u,m),ye($,e,m),w(e,f,m),ye(p,e,m),d=!0},p(e,t){const n={};512&t[0]&&(n.disabled=1===e[9]),l.$set(n);const s={};16&t[0]&&(s.disabled=!e[4]),i.$set(s);const o={};513&t[0]&&(o.disabled=1===e[9]||0===e[0]),$.$set(o);const r={};513&t[0]&&(r.disabled=1===e[9]||e[0]===e[9]-1),p.$set(r)},i(e){d||(pe(t.$$.fragment,e),pe(l.$$.fragment,e),pe(o.$$.fragment,e),pe(a.$$.fragment,e),pe(i.$$.fragment,e),pe($.$$.fragment,e),pe(p.$$.fragment,e),d=!0)},o(e){de(t.$$.fragment,e),de(l.$$.fragment,e),de(o.$$.fragment,e),de(a.$$.fragment,e),de(i.$$.fragment,e),de($.$$.fragment,e),de(p.$$.fragment,e),d=!1},d(e){xe(t,e),e&&y(n),xe(l,e),e&&y(s),xe(o,e),e&&y(r),xe(a,e),e&&y(c),xe(i,e),e&&y(u),xe($,e),e&&y(f),xe(p,e)}}}function qs(e){let t,n,l,s,o,r,a;function c(t){e[37].call(null,t)}let i={label:"Mute"};return void 0!==e[12][e[2]][e[0]]&&(i.checked=e[12][e[2]][e[0]]),t=new tl({props:i}),V.push(()=>be(t,"checked",c)),t.$on("click",e[33]),s=new Pn({props:{label:"Solo"}}),s.$on("click",e[32]),r=new Pn({props:{label:"Unmute All"}}),r.$on("click",e[31]),{c(){we(t.$$.fragment),l=E(),we(s.$$.fragment),o=E(),we(r.$$.fragment)},m(e,n){ye(t,e,n),w(e,l,n),ye(s,e,n),w(e,o,n),ye(r,e,n),a=!0},p(e,l){const s={};!n&&4101&l[0]&&(n=!0,s.checked=e[12][e[2]][e[0]],ne(()=>n=!1)),t.$set(s)},i(e){a||(pe(t.$$.fragment,e),pe(s.$$.fragment,e),pe(r.$$.fragment,e),a=!0)},o(e){de(t.$$.fragment,e),de(s.$$.fragment,e),de(r.$$.fragment,e),a=!1},d(e){xe(t,e),e&&y(l),xe(s,e),e&&y(o),xe(r,e)}}}function Is(e){let t,n,l,s,o,r;return t=new Pn({props:{label:"Add"}}),t.$on("click",e[17]),l=new Pn({props:{disabled:1===e[9],label:"Delete"}}),l.$on("click",e[18]),o=new Pn({props:{label:"Clear"}}),o.$on("click",e[19]),{c(){we(t.$$.fragment),n=E(),we(l.$$.fragment),s=E(),we(o.$$.fragment)},m(e,a){ye(t,e,a),w(e,n,a),ye(l,e,a),w(e,s,a),ye(o,e,a),r=!0},p(e,t){const n={};512&t[0]&&(n.disabled=1===e[9]),l.$set(n)},i(e){r||(pe(t.$$.fragment,e),pe(l.$$.fragment,e),pe(o.$$.fragment,e),r=!0)},o(e){de(t.$$.fragment,e),de(l.$$.fragment,e),de(o.$$.fragment,e),r=!1},d(e){xe(t,e),e&&y(n),xe(l,e),e&&y(s),xe(o,e)}}}function Us(e){let t,n,l,s,o,r,a,c,i,u,$,f,p,d,m,g;function h(t){e[35].call(null,t)}let v={label:"#",max:e[7]};function b(t){e[36].call(null,t)}void 0!==e[2]&&(v.value=e[2]),t=new _l({props:v}),V.push(()=>be(t,"value",h)),t.$on("input",e[29]);let x={label:"Name"};return void 0!==e[13][e[2]]&&(x.value=e[13][e[2]]),s=new wl({props:x}),V.push(()=>be(s,"value",b)),a=new _n({props:{label:"Playback",$$slots:{default:[Os]},$$scope:{ctx:e}}}),i=new _n({props:{label:"Track",$$slots:{default:[Ds]},$$scope:{ctx:e}}}),$=new _n({props:{label:"Track Mute",$$slots:{default:[qs]},$$scope:{ctx:e}}}),p=new _n({props:{label:"Row",$$slots:{default:[Is]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment),l=E(),we(s.$$.fragment),r=E(),we(a.$$.fragment),c=E(),we(i.$$.fragment),u=E(),we($.$$.fragment),f=E(),we(p.$$.fragment),d=E(),m=k("div"),M(m,"class","outset")},m(e,n){ye(t,e,n),w(e,l,n),ye(s,e,n),w(e,r,n),ye(a,e,n),w(e,c,n),ye(i,e,n),w(e,u,n),ye($,e,n),w(e,f,n),ye(p,e,n),w(e,d,n),w(e,m,n),g=!0},p(e,l){const r={};128&l[0]&&(r.max=e[7]),!n&&4&l[0]&&(n=!0,r.value=e[2],ne(()=>n=!1)),t.$set(r);const c={};!o&&8196&l[0]&&(o=!0,c.value=e[13][e[2]],ne(()=>o=!1)),s.$set(c);const u={};2048&l[0]|2097152&l[1]&&(u.$$scope={dirty:l,ctx:e}),a.$set(u);const f={};529&l[0]|2097152&l[1]&&(f.$$scope={dirty:l,ctx:e}),i.$set(f);const d={};4101&l[0]|2097152&l[1]&&(d.$$scope={dirty:l,ctx:e}),$.$set(d);const m={};512&l[0]|2097152&l[1]&&(m.$$scope={dirty:l,ctx:e}),p.$set(m)},i(e){g||(pe(t.$$.fragment,e),pe(s.$$.fragment,e),pe(a.$$.fragment,e),pe(i.$$.fragment,e),pe($.$$.fragment,e),pe(p.$$.fragment,e),g=!0)},o(e){de(t.$$.fragment,e),de(s.$$.fragment,e),de(a.$$.fragment,e),de(i.$$.fragment,e),de($.$$.fragment,e),de(p.$$.fragment,e),g=!1},d(e){xe(t,e),e&&y(l),xe(s,e),e&&y(r),xe(a,e),e&&y(c),xe(i,e),e&&y(u),xe($,e),e&&y(f),xe(p,e),e&&y(d),e&&y(m)}}}function Fs(e){let t,n,l;return n=new Cn({props:{$$slots:{default:[Us]},$$scope:{ctx:e}}}),{c(){t=k("div"),we(n.$$.fragment),M(t,"slot","head")},m(e,s){w(e,t,s),ye(n,t,null),l=!0},p(e,t){const l={};14997&t[0]|2097152&t[1]&&(l.$$scope={dirty:t,ctx:e}),n.$set(l)},i(e){l||(pe(n.$$.fragment,e),l=!0)},o(e){de(n.$$.fragment,e),l=!1},d(e){e&&y(t),xe(n)}}}function Xs(e){let t,n,l,s,o,r,a,c,i,u,$,f=e[49];function p(t){e[38].call(null,t,e[49])}function d(t){e[39].call(null,t)}function m(t){e[40].call(null,t,e[47],e[48],e[49])}let g={title:"Track "+e[49]};void 0!==e[12][e[2]][e[49]]&&(g.mute=e[12][e[2]][e[49]]),void 0!==e[1]&&(g.selectedRow=e[1]),void 0!==e[47]&&(g.data=e[47]),n=new _s({props:g}),V.push(()=>be(n,"mute",p)),V.push(()=>be(n,"selectedRow",d)),V.push(()=>be(n,"data",m)),n.$on("rowselect",e[41]);const h=()=>e[42](t,f),v=()=>e[42](null,f);function x(...t){return e[43](e[49],...t)}return{c(){t=k("div"),we(n.$$.fragment),r=E(),a=k("div"),c=E(),M(a,"class","level svelte-1v8sxgp"),T(a,"transform","scaleY("+(e[14][e[49]]||0)+")"),M(t,"class","channel inset svelte-1v8sxgp"),L(t,"selected",e[49]==e[0])},m(e,l){w(e,t,l),ye(n,t,null),b(t,r),b(t,a),b(t,c),h(),i=!0,u||($=R(t,"focusin",x),u=!0)},p(r,c){e=r;const u={};!l&&4100&c[0]&&(l=!0,u.mute=e[12][e[2]][e[49]],ne(()=>l=!1)),!s&&2&c[0]&&(s=!0,u.selectedRow=e[1],ne(()=>s=!1)),!o&&260&c[0]&&(o=!0,u.data=e[47],ne(()=>o=!1)),n.$set(u),(!i||16384&c[0])&&T(a,"transform","scaleY("+(e[14][e[49]]||0)+")"),f!==e[49]&&(v(),f=e[49],h()),1&c[0]&&L(t,"selected",e[49]==e[0])},i(e){i||(pe(n.$$.fragment,e),i=!0)},o(e){de(n.$$.fragment,e),i=!1},d(e){e&&y(t),xe(n),v(),u=!1,$()}}}function Bs(e){let t,n;return t=new Ms({}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Hs(e){let t,n,l,s,o,r=e[8][e[2]],a=[];for(let t=0;t<r.length;t+=1)a[t]=Xs(Ss(e,r,t));const c=e=>de(a[e],1,1,()=>{a[e]=null});let i=e[3]&&Bs();return{c(){t=E(),n=k("div");for(let e=0;e<a.length;e+=1)a[e].c();l=E(),i&&i.c(),s=P(),M(n,"class","channels outset svelte-1v8sxgp")},m(e,r){w(e,t,r),w(e,n,r);for(let e=0;e<a.length;e+=1)a[e].m(n,null);w(e,l,r),i&&i.m(e,r),w(e,s,r),o=!0},p(e,t){if(20807&t[0]){let l;for(r=e[8][e[2]],l=0;l<r.length;l+=1){const s=Ss(e,r,l);a[l]?(a[l].p(s,t),pe(a[l],1)):(a[l]=Xs(s),a[l].c(),pe(a[l],1),a[l].m(n,null))}for($e(),l=r.length;l<a.length;l+=1)c(l);fe()}e[3]?i?8&t[0]&&pe(i,1):(i=Bs(),i.c(),pe(i,1),i.m(s.parentNode,s)):i&&($e(),de(i,1,1,()=>{i=null}),fe())},i(e){if(!o){for(let e=0;e<r.length;e+=1)pe(a[e]);pe(i),o=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)de(a[e]);de(i),o=!1},d(e){e&&y(t),e&&y(n),x(a,e),e&&y(l),i&&i.d(e),e&&y(s)}}}function Gs(e){let t,n,l,s,o;return n=new Dn({props:{$$slots:{default:[Ns],head:[js]},$$scope:{ctx:e}}}),s=new Dn({props:{$$slots:{default:[Hs],head:[Fs]},$$scope:{ctx:e}}}),{c(){t=k("div"),we(n.$$.fragment),l=E(),we(s.$$.fragment),M(t,"class","splitView")},m(e,r){w(e,t,r),ye(n,t,null),b(t,l),ye(s,t,null),o=!0},p(e,t){const l={};13604&t[0]|2097152&t[1]&&(l.$$scope={dirty:t,ctx:e}),n.$set(l);const o={};31711&t[0]|2097152&t[1]&&(o.$$scope={dirty:t,ctx:e}),s.$set(o)},i(e){o||(pe(n.$$.fragment,e),pe(s.$$.fragment,e),o=!0)},o(e){de(n.$$.fragment,e),de(s.$$.fragment,e),o=!1},d(e){e&&y(t),xe(n),xe(s)}}}function Js(e,t,n){let l,s,o,r,a,c;i(e,De,e=>n(8,l=e)),i(e,Ie,e=>n(44,s=e)),i(e,We,e=>n(11,o=e)),i(e,Ze,e=>n(12,r=e)),i(e,qe,e=>n(13,a=e)),i(e,Ye,e=>n(14,c=e));let u,$,{selectedChannel:f=0}=t,{selectedRow:d=0}=t,{selectedPattern:m=0}=t,{piano:g=!1}=t;const h=G(),v=[],b=(e,t)=>{const n=l[m].slice();[n[e],n[t]]=[n[t],n[e]],p(De,l[m]=n,l)};let w,y,x;return e.$$set=e=>{"selectedChannel"in e&&n(0,f=e.selectedChannel),"selectedRow"in e&&n(1,d=e.selectedRow),"selectedPattern"in e&&n(2,m=e.selectedPattern),"piano"in e&&n(3,g=e.piano)},e.$$.update=()=>{256&e.$$.dirty[0]&&n(7,w=l.length),260&e.$$.dirty[0]&&n(2,m=xt(m,0,l.length-1)),260&e.$$.dirty[0]&&n(9,y=l[m].length),261&e.$$.dirty[0]&&n(0,f=xt(f,0,l[m].length-1)),262&e.$$.dirty[0]&&n(1,d=0|xt(d,0,l[m][0].length-3)),4&e.$$.dirty[0]|8192&e.$$.dirty[1]&&n(10,x=s.map((e,t)=>e===m&&t).filter(e=>!1!==e))},[f,d,m,g,u,$,v,w,l,y,x,o,r,a,c,()=>{n(2,m=Pt(((e=3,t=64)=>new Array(e).fill(0).map(()=>Rt(t)))(3,64)))},()=>{var e;e=m,Ie.update(t=>t.map(t=>t>e?t-1:t)),De.update(t=>(t.splice(e,1),t)),qe.update(t=>(t.splice(e,1),t)),Ze.update(t=>(t.splice(e,1),t))},()=>{n(1,d=(e=>{let t;return De.update(n=>(t=n[e][0].length-2,n[e].forEach(e=>e.push(0)),n)),t})(m))},()=>{var e,t;e=m,t=d,De.update(n=>(n[e].forEach(e=>{e.splice(t+2,1)}),n))},()=>{var e,t;e=m,t=d,De.update(n=>(n[e].forEach(e=>{e[t+2]=0}),n))},()=>{b(f,n(0,--f))},()=>{b(f,n(0,++f))},()=>{n(0,f=((e,t=0,n=0)=>{let l;return De.update(s=>{l=s[e].length;const o=s[e][0].length-2;return s[e].push(Rt(o,t,n)),s}),Ze.update(t=>(t[e].push(!1),t)),l})(m))},()=>{var e,t;e=m,t=f,De.update(n=>(n[e].splice(t,1),n)),Ze.update(n=>(n[e].splice(t,1),n))},()=>{l[m][f].fill(0,2),De.set(l)},()=>{n(4,u=l[m][f].slice())},()=>{const e=l[m][f],t=u.slice();p(De,l[m][f]=[...t.slice(0,e.length),...e.slice(t.length)],l),De.set(l)},()=>{n(5,$=_t(l[m]))},()=>{var e,t;e=m,t=_t($),De.update(n=>(n[e]=t,n))},()=>{h("patternselect"),n(1,d=0)},()=>{o?yn():bn(m)},()=>{p(Ze,r[m]=new Array(y).fill(!1),r)},()=>{const e=new Array(y).fill(!0);e[f]=!1,p(Ze,r[m]=e,r)},()=>{p(Ze,r[m][f]=!r[m][f],r)},function(){m=j(this),n(2,m),n(8,l)},function(e){m=e,n(2,m),n(8,l)},function(e){a[m]=e,qe.set(a)},function(e){r[m][f]=e,Ze.set(r)},function(e,t){r[m][t]=e,Ze.set(r)},function(e){d=e,n(1,d),n(8,l),n(2,m)},function(e,t,n,s){n[s]=e,De.set(l)},function(t){J(e,t)},function(e,t){V[e?"unshift":"push"](()=>{v[t]=e,n(6,v)})},e=>n(0,f=e)]}class Ks extends _e{constructor(e){super(),ke(this,e,Js,Gs,r,{selectedChannel:0,selectedRow:1,selectedPattern:2,piano:3},[-1,-1])}}function Vs(e,t,n){const l=e.slice();return l[11]=t[n],l[13]=n,l}function Ys(e,t,n){const l=e.slice();return l[8]=t[n],l}function Zs(e,t,n){const l=e.slice();return l[5]=t[n],l}function Ws(t){let n,l,s=t[11]+"",o=t[13]&&function(e){let t;return{c(){t=z(" + ")},m(e,n){w(e,t,n)},d(e){e&&y(t)}}}();return{c(){o&&o.c(),n=k("kbd"),l=z(s),M(n,"class","svelte-6rjppp")},m(e,t){o&&o.m(e,t),w(e,n,t),b(n,l)},p:e,d(e){o&&o.d(e),e&&y(n)}}}function Qs(e){let t,n,l,s,o=e[8].desc+"",r=e[8].keys,a=[];for(let t=0;t<r.length;t+=1)a[t]=Ws(Vs(e,r,t));return{c(){t=k("dt");for(let e=0;e<a.length;e+=1)a[e].c();n=E(),l=k("dd"),s=z(o),M(t,"class","svelte-6rjppp"),M(l,"class","svelte-6rjppp")},m(e,o){w(e,t,o);for(let e=0;e<a.length;e+=1)a[e].m(t,null);b(t,n),w(e,l,o),b(l,s)},p(e,l){if(1&l){let s;for(r=e[8].keys,s=0;s<r.length;s+=1){const o=Vs(e,r,s);a[s]?a[s].p(o,l):(a[s]=Ws(o),a[s].c(),a[s].m(t,n))}for(;s<a.length;s+=1)a[s].d(1);a.length=r.length}},d(e){e&&y(t),x(a,e),e&&y(l)}}}function eo(e){let t,n,l,s=e[5].name+"",o=e[5].shortcuts,r=[];for(let t=0;t<o.length;t+=1)r[t]=Qs(Ys(e,o,t));return{c(){t=z(s),n=E(),l=k("dl");for(let e=0;e<r.length;e+=1)r[e].c();M(l,"class","svelte-6rjppp")},m(e,s){w(e,t,s),w(e,n,s),w(e,l,s);for(let e=0;e<r.length;e+=1)r[e].m(l,null)},p(e,t){if(1&t){let n;for(o=e[5].shortcuts,n=0;n<o.length;n+=1){const s=Ys(e,o,n);r[n]?r[n].p(s,t):(r[n]=Qs(s),r[n].c(),r[n].m(l,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=o.length}},d(e){e&&y(t),e&&y(n),e&&y(l),x(r,e)}}}function to(t){let n,l=t[0],s=[];for(let e=0;e<l.length;e+=1)s[e]=eo(Zs(t,l,e));return{c(){for(let e=0;e<s.length;e+=1)s[e].c();n=P()},m(e,t){for(let n=0;n<s.length;n+=1)s[n].m(e,t);w(e,n,t)},p(e,[t]){if(1&t){let o;for(l=e[0],o=0;o<l.length;o+=1){const r=Zs(e,l,o);s[o]?s[o].p(r,t):(s[o]=eo(r),s[o].c(),s[o].m(n.parentNode,n))}for(;o<s.length;o+=1)s[o].d(1);s.length=l.length}},i:e,o:e,d(e){x(s,e),e&&y(n)}}}function no(e){const t=navigator.userAgent.indexOf("Mac OS X")>-1,n=t?"⌥":"ALT",l=t?"▲":"ꜛ",s=t?"▼":"ꜜ";return[[{name:"Playback",shortcuts:[{keys:["ENTER"],desc:"Play / Stop the current pattern"},{keys:[n,"ENTER"],desc:"Play / Stop song"},{keys:["⇧","ENTER"],desc:"Play the current pattern from the beginning"},{keys:[n,"⇧","ENTER"],desc:"Play song from the beginning"}]},{name:"Editing",shortcuts:[{keys:[l],desc:"Move up one row in the pattern"},{keys:[s],desc:"Move down one row in the pattern"},{keys:["⇧",l],desc:"Move up 4 rows in the pattern"},{keys:["⇧",s],desc:"Move down 4 rows in the pattern"},{keys:[n,l],desc:"Increase note attenuation (fine)"},{keys:[n,s],desc:"Decrease note attenuation (fine)"},{keys:[n,"⇧",l],desc:"Increase note attenuation (coarse)"},{keys:[n,"⇧",s],desc:"Decrease note attenuation (coarse)"},{keys:["SPACE"],desc:"Release note"},{keys:["←"],desc:"Clear note"}]}]]}class lo extends _e{constructor(e){super(),ke(this,e,no,to,r,{})}}var so="https://github.com/keithclark/ZzFXM";function oo(t){let n,l,s,o,r,a,c,i,u,$,f,p;return{c(){n=k("div"),l=k("h1"),l.textContent="ZzFXM Music Tracker",s=z("\n  v"),o=z("1.0.5b"),r=E(),a=k("p"),a.innerHTML='by <a href="https://keithclark.co.uk">Keith Clark</a>',c=E(),i=k("p"),u=z("Source available at the "),$=k("a"),f=z("ZzFXM GitHub Repo"),M(l,"class","svelte-1qzhe7x"),M($,"target","_blank"),M($,"href",p=so+"/tree/master/tools/tracker"),M(n,"class","svelte-1qzhe7x")},m(e,t){w(e,n,t),b(n,l),b(n,s),b(n,o),b(n,r),b(n,a),b(n,c),b(n,i),b(i,u),b(i,$),b($,f)},p:e,i:e,o:e,d(e){e&&y(n)}}}class ro extends _e{constructor(e){super(),ke(this,e,null,oo,r,{})}}function ao(e){let t,n,l;return{c(){t=k("span"),n=z("Error: "),l=z(e[1])},m(e,s){w(e,t,s),b(t,n),b(t,l)},p(e,t){2&t&&S(l,e[1])},d(e){e&&y(t)}}}function co(e){let t,n,l,s,o,r,a,c,i,u,$=e[1]&&ao(e);return a=new Pn({props:{label:"Apply"}}),a.$on("click",e[2]),{c(){t=k("div"),n=k("div"),l=k("textarea"),s=E(),$&&$.c(),o=E(),r=k("span"),we(a.$$.fragment),M(l,"class","inset input svelte-n5c82z"),M(n,"class","inset svelte-n5c82z"),M(t,"class","wrap svelte-n5c82z")},m(f,p){w(f,t,p),b(t,n),b(n,l),A(l,e[0]),b(t,s),$&&$.m(t,null),b(t,o),b(t,r),ye(a,r,null),c=!0,i||(u=R(l,"input",e[3]),i=!0)},p(e,[n]){1&n&&A(l,e[0]),e[1]?$?$.p(e,n):($=ao(e),$.c(),$.m(t,o)):$&&($.d(1),$=null)},i(e){c||(pe(a.$$.fragment,e),c=!0)},o(e){de(a.$$.fragment,e),c=!1},d(e){e&&y(t),$&&$.d(),xe(a),i=!1,u()}}}function io(e,t,n){let l,s;const o=G();B(()=>{n(0,l=Ot()),n(1,s=null)});return[l,s,()=>{try{It(l),o("apply")}catch(e){n(1,s=e.message)}},function(){l=this.value,n(0,l)}]}class uo extends _e{constructor(e){super(),ke(this,e,io,co,r,{})}}function $o(e){let t,n,l,s,o,r;const a=e[2].default,c=u(a,e,e[1],null);return{c(){t=k("div"),n=k("div"),l=z(e[0]),s=E(),o=k("div"),c&&c.c(),M(n,"class","propertyList__label svelte-1kanttj"),M(o,"class","propertyList__properties inset"),M(t,"class","propertyList svelte-1kanttj")},m(e,a){w(e,t,a),b(t,n),b(n,l),b(t,s),b(t,o),c&&c.m(o,null),r=!0},p(e,[t]){(!r||1&t)&&S(l,e[0]),c&&c.p&&2&t&&f(c,a,e,e[1],t,null,null)},i(e){r||(pe(c,e),r=!0)},o(e){de(c,e),r=!1},d(e){e&&y(t),c&&c.d(e)}}}function fo(e,t,n){let{label:l=""}=t,{$$slots:s={},$$scope:o}=t;return e.$$set=e=>{"label"in e&&n(0,l=e.label),"$$scope"in e&&n(1,o=e.$$scope)},[l,o,s]}class po extends _e{constructor(e){super(),ke(this,e,fo,$o,r,{label:0})}}function mo(e,t,n){const l=e.slice();return l[6]=t[n],l}function go(e){let t,n,l,s=e[6]+"";return{c(){t=k("option"),n=z(s),t.__value=l=e[6],t.value=t.__value},m(e,l){w(e,t,l),b(t,n)},p(e,o){4&o&&s!==(s=e[6]+"")&&S(n,s),4&o&&l!==(l=e[6])&&(t.__value=l,t.value=t.__value)},d(e){e&&y(t)}}}function ho(e){let t,n,l,s,o=e[2],r=[];for(let t=0;t<o.length;t+=1)r[t]=go(mo(e,o,t));return{c(){t=k("select");for(let e=0;e<r.length;e+=1)r[e].c();M(t,"id",n=e[5]),M(t,"class","select"),void 0===e[0]&&te(()=>e[4].call(t))},m(n,o){w(n,t,o);for(let e=0;e<r.length;e+=1)r[e].m(t,null);C(t,e[0]),l||(s=R(t,"change",e[4]),l=!0)},p(e,l){if(4&l){let n;for(o=e[2],n=0;n<o.length;n+=1){const s=mo(e,o,n);r[n]?r[n].p(s,l):(r[n]=go(s),r[n].c(),r[n].m(t,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=o.length}32&l&&n!==(n=e[5])&&M(t,"id",n),5&l&&C(t,e[0])},d(e){e&&y(t),x(r,e),l=!1,s()}}}function vo(e){let t,n;return t=new dl({props:{label:e[1],hint:e[3],$$slots:{default:[ho,({id:e})=>({5:e}),({id:e})=>e?32:0]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},p(e,[n]){const l={};2&n&&(l.label=e[1]),8&n&&(l.hint=e[3]),549&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function bo(e,t,n){let{label:l=""}=t,{value:s=""}=t,{options:o=[]}=t,{hint:r=""}=t;return e.$$set=e=>{"label"in e&&n(1,l=e.label),"value"in e&&n(0,s=e.value),"options"in e&&n(2,o=e.options),"hint"in e&&n(3,r=e.hint)},[s,l,o,r,function(){s=j(this),n(0,s),n(2,o)}]}class wo extends _e{constructor(e){super(),ke(this,e,bo,vo,r,{label:1,value:0,options:2,hint:3})}}function yo(e){let t,n,l,s,o,r,a,c,i;function u(t){e[3].call(null,t)}let $={hint:"The amount of data the player will prerender before playing it. Increase this if your browser is cutting off audio during playback",label:"Playback buffer size (bytes)",options:Re};function f(t){e[4].call(null,t)}void 0!==e[0]&&($.value=e[0]),t=new wo({props:$}),V.push(()=>be(t,"value",u));let p={hint:"Controls the audio quality. Reduce in favour of UI responsiveness if your browser is consuming too many system resources",label:"Playback sample rate (hz)",options:Pe};function d(t){e[5].call(null,t)}void 0!==e[1]&&(p.value=e[1]),s=new wo({props:p}),V.push(()=>be(s,"value",f));let m={hint:"Controls the responsiveness of the UI during playback. Reduce in favour of audio quality if your browser is consuming too many system resources",label:"UI Refresh rate (FPS)",options:Ee};return void 0!==e[2]&&(m.value=e[2]),a=new wo({props:m}),V.push(()=>be(a,"value",d)),{c(){we(t.$$.fragment),l=E(),we(s.$$.fragment),r=E(),we(a.$$.fragment)},m(e,n){ye(t,e,n),w(e,l,n),ye(s,e,n),w(e,r,n),ye(a,e,n),i=!0},p(e,l){const r={};!n&&1&l&&(n=!0,r.value=e[0],ne(()=>n=!1)),t.$set(r);const i={};!o&&2&l&&(o=!0,i.value=e[1],ne(()=>o=!1)),s.$set(i);const u={};!c&&4&l&&(c=!0,u.value=e[2],ne(()=>c=!1)),a.$set(u)},i(e){i||(pe(t.$$.fragment,e),pe(s.$$.fragment,e),pe(a.$$.fragment,e),i=!0)},o(e){de(t.$$.fragment,e),de(s.$$.fragment,e),de(a.$$.fragment,e),i=!1},d(e){xe(t,e),e&&y(l),xe(s,e),e&&y(r),xe(a,e)}}}function xo(e){let t,n;return t=new po({props:{label:"Playback Settings",$$slots:{default:[yo]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},p(e,[n]){const l={};71&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function ko(e,t,n){let l,s,o;return i(e,et,e=>n(0,l=e)),i(e,Qe,e=>n(1,s=e)),i(e,tt,e=>n(2,o=e)),[l,s,o,function(e){l=e,et.set(l)},function(e){s=e,Qe.set(s)},function(e){o=e,tt.set(o)}]}class _o extends _e{constructor(e){super(),ke(this,e,ko,xo,r,{})}}function zo(e){let t,n,l,s,o,r,a,c,i,u,$,f,p,d,m;function g(t){e[5].call(null,t)}let h={size:40,hint:"The name of the song",label:"Title"};function v(t){e[6].call(null,t)}void 0!==e[3]&&(h.value=e[3]),t=new wl({props:h}),V.push(()=>be(t,"value",g));let b={size:40,hint:"The name of the composer",label:"Author"};function x(t){e[7].call(null,t)}void 0!==e[4].author&&(b.value=e[4].author),s=new wl({props:b}),V.push(()=>be(s,"value",v));let k={size:40,hint:"The URL of the composer",label:"Author URL"};function _(t){e[8].call(null,t)}void 0!==e[4].authorUrl&&(k.value=e[4].authorUrl),a=new wl({props:k}),V.push(()=>be(a,"value",x));let z={size:40,hint:"Notes about the song",label:"Notes",multiline:!0};function P(t){e[9].call(null,t)}void 0!==e[4].notes&&(z.value=e[4].notes),u=new wl({props:z}),V.push(()=>be(u,"value",_));let R={size:4,hint:"The license of the song",label:"License"};return void 0!==e[4].license&&(R.value=e[4].license),p=new wl({props:R}),V.push(()=>be(p,"value",P)),{c(){we(t.$$.fragment),l=E(),we(s.$$.fragment),r=E(),we(a.$$.fragment),i=E(),we(u.$$.fragment),f=E(),we(p.$$.fragment)},m(e,n){ye(t,e,n),w(e,l,n),ye(s,e,n),w(e,r,n),ye(a,e,n),w(e,i,n),ye(u,e,n),w(e,f,n),ye(p,e,n),m=!0},p(e,l){const r={};!n&&8&l&&(n=!0,r.value=e[3],ne(()=>n=!1)),t.$set(r);const i={};!o&&16&l&&(o=!0,i.value=e[4].author,ne(()=>o=!1)),s.$set(i);const f={};!c&&16&l&&(c=!0,f.value=e[4].authorUrl,ne(()=>c=!1)),a.$set(f);const m={};!$&&16&l&&($=!0,m.value=e[4].notes,ne(()=>$=!1)),u.$set(m);const g={};!d&&16&l&&(d=!0,g.value=e[4].license,ne(()=>d=!1)),p.$set(g)},i(e){m||(pe(t.$$.fragment,e),pe(s.$$.fragment,e),pe(a.$$.fragment,e),pe(u.$$.fragment,e),pe(p.$$.fragment,e),m=!0)},o(e){de(t.$$.fragment,e),de(s.$$.fragment,e),de(a.$$.fragment,e),de(u.$$.fragment,e),de(p.$$.fragment,e),m=!1},d(e){xe(t,e),e&&y(l),xe(s,e),e&&y(r),xe(a,e),e&&y(i),xe(u,e),e&&y(f),xe(p,e)}}}function Eo(e){let t,n,l;return{c(){t=k("span"),n=z(e[0]),l=z(" seconds"),M(t,"class","output")},m(e,s){w(e,t,s),b(t,n),b(t,l)},p(e,t){1&t&&S(n,e[0])},d(e){e&&y(t)}}}function Po(e){let t,n,l;return{c(){t=k("span"),n=z(e[1]),l=z(" bytes"),M(t,"class","output")},m(e,s){w(e,t,s),b(t,n),b(t,l)},p(e,t){2&t&&S(n,e[1])},d(e){e&&y(t)}}}function Ro(e){let t,n,l;return{c(){t=k("span"),n=z(e[2]),l=z(" bytes"),M(t,"class","output")},m(e,s){w(e,t,s),b(t,n),b(t,l)},p(e,t){4&t&&S(n,e[2])},d(e){e&&y(t)}}}function Mo(e){let t,n,l,s,o,r;return t=new dl({props:{label:"Playback time",$$slots:{default:[Eo]},$$scope:{ctx:e}}}),l=new dl({props:{label:"Raw file size",$$slots:{default:[Po]},$$scope:{ctx:e}}}),o=new dl({props:{label:"Deflated file size (no meta data)",$$slots:{default:[Ro]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment),n=E(),we(l.$$.fragment),s=E(),we(o.$$.fragment)},m(e,a){ye(t,e,a),w(e,n,a),ye(l,e,a),w(e,s,a),ye(o,e,a),r=!0},p(e,n){const s={};16385&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s);const r={};16386&n&&(r.$$scope={dirty:n,ctx:e}),l.$set(r);const a={};16388&n&&(a.$$scope={dirty:n,ctx:e}),o.$set(a)},i(e){r||(pe(t.$$.fragment,e),pe(l.$$.fragment,e),pe(o.$$.fragment,e),r=!0)},o(e){de(t.$$.fragment,e),de(l.$$.fragment,e),de(o.$$.fragment,e),r=!1},d(e){xe(t,e),e&&y(n),xe(l,e),e&&y(s),xe(o,e)}}}function So(e){let t,n,l,s;return t=new po({props:{label:"Metadata",$$slots:{default:[zo]},$$scope:{ctx:e}}}),l=new po({props:{label:"Properties",$$slots:{default:[Mo]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment),n=E(),we(l.$$.fragment)},m(e,o){ye(t,e,o),w(e,n,o),ye(l,e,o),s=!0},p(e,[n]){const s={};16408&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s);const o={};16391&n&&(o.$$scope={dirty:n,ctx:e}),l.$set(o)},i(e){s||(pe(t.$$.fragment,e),pe(l.$$.fragment,e),s=!0)},o(e){de(t.$$.fragment,e),de(l.$$.fragment,e),s=!1},d(e){xe(t,e),e&&y(n),xe(l,e)}}}function Ao(e,t,n){let l,s,o,r;i(e,Ve,e=>n(11,l=e)),i(e,Le,e=>n(12,s=e)),i(e,je,e=>n(3,o=e)),i(e,Ue,e=>n(4,r=e));let a,c="?",u="?",$="?";const f=()=>{n(1,u=Ot().length)};return B(()=>{n(0,c=Math.floor(l*(125/s)/8.47)),f(),"pako"in window&&n(2,$=pako.deflate(Ot({noMeta:!0})).length)}),e.$$.update=()=>{1048&e.$$.dirty&&(o||r)&&(a&&clearTimeout(a),n(10,a=setTimeout(f,1e3)))},[c,u,$,o,r,function(e){o=e,je.set(o)},function(e){r.author=e,Ue.set(r)},function(e){r.authorUrl=e,Ue.set(r)},function(e){r.notes=e,Ue.set(r)},function(e){r.license=e,Ue.set(r)}]}class To extends _e{constructor(e){super(),ke(this,e,Ao,So,r,{})}}const{window:Co}=he;function jo(t){let n,l,s,o,r,a,c,i,u,$;return n=new Pn({props:{label:"New"}}),n.$on("click",t[25]),s=new Pn({props:{label:"Load"}}),s.$on("click",t[20]),r=new Pn({props:{label:"Save"}}),r.$on("click",t[21]),c=new Pn({props:{label:"Source"}}),c.$on("click",t[26]),u=new Pn({props:{label:"Properties"}}),u.$on("click",t[30]),{c(){we(n.$$.fragment),l=E(),we(s.$$.fragment),o=E(),we(r.$$.fragment),a=E(),we(c.$$.fragment),i=E(),we(u.$$.fragment)},m(e,t){ye(n,e,t),w(e,l,t),ye(s,e,t),w(e,o,t),ye(r,e,t),w(e,a,t),ye(c,e,t),w(e,i,t),ye(u,e,t),$=!0},p:e,i(e){$||(pe(n.$$.fragment,e),pe(s.$$.fragment,e),pe(r.$$.fragment,e),pe(c.$$.fragment,e),pe(u.$$.fragment,e),$=!0)},o(e){de(n.$$.fragment,e),de(s.$$.fragment,e),de(r.$$.fragment,e),de(c.$$.fragment,e),de(u.$$.fragment,e),$=!1},d(e){xe(n,e),e&&y(l),xe(s,e),e&&y(o),xe(r,e),e&&y(a),xe(c,e),e&&y(i),xe(u,e)}}}function Lo(e){let t,n,l,s;return t=new tl({props:{checked:e[7],label:"Piano"}}),t.$on("click",e[27]),l=new tl({props:{checked:e[8],label:"Instruments"}}),l.$on("click",e[28]),{c(){we(t.$$.fragment),n=E(),we(l.$$.fragment)},m(e,o){ye(t,e,o),w(e,n,o),ye(l,e,o),s=!0},p(e,n){const s={};128&n[0]&&(s.checked=e[7]),t.$set(s);const o={};256&n[0]&&(o.checked=e[8]),l.$set(o)},i(e){s||(pe(t.$$.fragment,e),pe(l.$$.fragment,e),s=!0)},o(e){de(t.$$.fragment,e),de(l.$$.fragment,e),s=!1},d(e){xe(t,e),e&&y(n),xe(l,e)}}}function No(e){let t,n,l;function s(t){e[33].call(null,t)}let o={id:e[55],min:0,max:1,step:.1};return void 0!==e[15]&&(o.value=e[15]),t=new ds({props:o}),V.push(()=>be(t,"value",s)),{c(){we(t.$$.fragment)},m(e,n){ye(t,e,n),l=!0},p(e,l){const s={};16777216&l[1]&&(s.id=e[55]),!n&&32768&l[0]&&(n=!0,s.value=e[15],ne(()=>n=!1)),t.$set(s)},i(e){l||(pe(t.$$.fragment,e),l=!0)},o(e){de(t.$$.fragment,e),l=!1},d(e){xe(t,e)}}}function Oo(t){let n,l,s,o,r,a;return n=new Pn({props:{label:"Settings"}}),n.$on("click",t[29]),s=new Pn({props:{label:"About"}}),s.$on("click",t[23]),r=new Pn({props:{label:"Keys"}}),r.$on("click",t[22]),{c(){we(n.$$.fragment),l=E(),we(s.$$.fragment),o=E(),we(r.$$.fragment)},m(e,t){ye(n,e,t),w(e,l,t),ye(s,e,t),w(e,o,t),ye(r,e,t),a=!0},p:e,i(e){a||(pe(n.$$.fragment,e),pe(s.$$.fragment,e),pe(r.$$.fragment,e),a=!0)},o(e){de(n.$$.fragment,e),de(s.$$.fragment,e),de(r.$$.fragment,e),a=!1},d(e){xe(n,e),e&&y(l),xe(s,e),e&&y(o),xe(r,e)}}}function Do(e){let t,n,l,s,o,r,a,c,i,u,$,f,p,d,m,g;function h(t){e[31].call(null,t)}let v={label:"Title"};function b(t){e[32].call(null,t)}void 0!==e[11]&&(v.value=e[11]),t=new wl({props:v}),V.push(()=>be(t,"value",h));let x={label:"Speed",size:3,min:1,max:320};return void 0!==e[14]&&(x.value=e[14]),s=new _l({props:x}),V.push(()=>be(s,"value",b)),a=new _n({props:{label:"File",$$slots:{default:[jo]},$$scope:{ctx:e}}}),i=new _n({props:{label:"Toggle Tools",$$slots:{default:[Lo]},$$scope:{ctx:e}}}),$=new dl({props:{label:"Master Volume",$$slots:{default:[No,({id:e})=>({55:e}),({id:e})=>[0,e?16777216:0]]},$$scope:{ctx:e}}}),p=new _n({props:{label:"Help",$$slots:{default:[Oo]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment),l=E(),we(s.$$.fragment),r=E(),we(a.$$.fragment),c=E(),we(i.$$.fragment),u=E(),we($.$$.fragment),f=E(),we(p.$$.fragment),d=E(),m=k("div"),M(m,"class","outset")},m(e,n){ye(t,e,n),w(e,l,n),ye(s,e,n),w(e,r,n),ye(a,e,n),w(e,c,n),ye(i,e,n),w(e,u,n),ye($,e,n),w(e,f,n),ye(p,e,n),w(e,d,n),w(e,m,n),g=!0},p(e,l){const r={};!n&&2048&l[0]&&(n=!0,r.value=e[11],ne(()=>n=!1)),t.$set(r);const c={};!o&&16384&l[0]&&(o=!0,c.value=e[14],ne(()=>o=!1)),s.$set(c);const u={};33554432&l[1]&&(u.$$scope={dirty:l,ctx:e}),a.$set(u);const f={};384&l[0]|33554432&l[1]&&(f.$$scope={dirty:l,ctx:e}),i.$set(f);const d={};32768&l[0]|50331648&l[1]&&(d.$$scope={dirty:l,ctx:e}),$.$set(d);const m={};33554432&l[1]&&(m.$$scope={dirty:l,ctx:e}),p.$set(m)},i(e){g||(pe(t.$$.fragment,e),pe(s.$$.fragment,e),pe(a.$$.fragment,e),pe(i.$$.fragment,e),pe($.$$.fragment,e),pe(p.$$.fragment,e),g=!0)},o(e){de(t.$$.fragment,e),de(s.$$.fragment,e),de(a.$$.fragment,e),de(i.$$.fragment,e),de($.$$.fragment,e),de(p.$$.fragment,e),g=!1},d(e){xe(t,e),e&&y(l),xe(s,e),e&&y(r),xe(a,e),e&&y(c),xe(i,e),e&&y(u),xe($,e),e&&y(f),xe(p,e),e&&y(d),e&&y(m)}}}function qo(e){let t,n,l;return n=new Cn({props:{$$slots:{default:[Do]},$$scope:{ctx:e}}}),{c(){t=k("div"),we(n.$$.fragment),M(t,"slot","head")},m(e,s){w(e,t,s),ye(n,t,null),l=!0},p(e,t){const l={};51584&t[0]|33554432&t[1]&&(l.$$scope={dirty:t,ctx:e}),n.$set(l)},i(e){l||(pe(n.$$.fragment,e),l=!0)},o(e){de(n.$$.fragment,e),l=!1},d(e){e&&y(t),xe(n)}}}function Io(e){let t,n;return t=new $s({props:{selected:e[16]}}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},p(e,n){const l={};65536&n[0]&&(l.selected=e[16]),t.$set(l)},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Uo(t){let n,l;return n=new uo({}),n.$on("apply",t[38]),{c(){we(n.$$.fragment)},m(e,t){ye(n,e,t),l=!0},p:e,i(e){l||(pe(n.$$.fragment,e),l=!0)},o(e){de(n.$$.fragment,e),l=!1},d(e){xe(n,e)}}}function Fo(e){let t,n;return t=new ro({}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Xo(e){let t,n;return t=new To({}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Bo(e){let t,n;return t=new _o({}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Ho(e){let t,n;return t=new lo({}),{c(){we(t.$$.fragment)},m(e,l){ye(t,e,l),n=!0},i(e){n||(pe(t.$$.fragment,e),n=!0)},o(e){de(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Go(e){let t,n,l,o,r,a,c,i,u,$,f,p,d,m,g,h,v,x,_,z,P,S,A,T,C,j,L,N,O,D,q;function I(t){e[34].call(null,t)}n=new Dn({props:{$$slots:{head:[qo]},$$scope:{ctx:e}}});let U={};function F(t){e[35].call(null,t)}function X(t){e[36].call(null,t)}function B(t){e[37].call(null,t)}void 0!==e[9]&&(U.selectedPosition=e[9]),o=new Wn({props:U}),V.push(()=>be(o,"selectedPosition",I)),o.$on("select",e[19]),o.$on("input",e[18]);let H={piano:e[7]};void 0!==e[12]&&(H.selectedChannel=e[12]),void 0!==e[10]&&(H.selectedRow=e[10]),void 0!==e[13]&&(H.selectedPattern=e[13]),c=new Ks({props:H}),V.push(()=>be(c,"selectedChannel",F)),V.push(()=>be(c,"selectedRow",X)),V.push(()=>be(c,"selectedPattern",B)),c.$on("patternselect",e[17]);let G=e[8]&&Io(e);function J(t){e[39].call(null,t)}let K={title:"Source",$$slots:{default:[Uo]},$$scope:{ctx:e}};function Y(t){e[40].call(null,t)}void 0!==e[4]&&(K.open=e[4]),d=new Bl({props:K}),V.push(()=>be(d,"open",J));let Z={title:"About",$$slots:{default:[Fo]},$$scope:{ctx:e}};function W(t){e[41].call(null,t)}void 0!==e[3]&&(Z.open=e[3]),h=new Bl({props:Z}),V.push(()=>be(h,"open",Y));let Q={title:"Song Properties",$$slots:{default:[Xo]},$$scope:{ctx:e}};function ee(t){e[42].call(null,t)}void 0!==e[6]&&(Q.open=e[6]),_=new Bl({props:Q}),V.push(()=>be(_,"open",W));let te={title:"Settings",$$slots:{default:[Bo]},$$scope:{ctx:e}};function le(t){e[43].call(null,t)}void 0!==e[5]&&(te.open=e[5]),S=new Bl({props:te}),V.push(()=>be(S,"open",ee));let se={title:"Keyboard shortcuts",$$slots:{default:[Ho]},$$scope:{ctx:e}};return void 0!==e[2]&&(se.open=e[2]),C=new Bl({props:se}),V.push(()=>be(C,"open",le)),{c(){t=k("main"),we(n.$$.fragment),l=E(),we(o.$$.fragment),a=E(),we(c.$$.fragment),f=E(),G&&G.c(),p=E(),we(d.$$.fragment),g=E(),we(h.$$.fragment),x=E(),we(_.$$.fragment),P=E(),we(S.$$.fragment),T=E(),we(C.$$.fragment),L=E(),N=k("input"),M(t,"class","svelte-x9n455"),M(N,"type","file"),N.hidden=!0},m(s,r){w(s,t,r),ye(n,t,null),b(t,l),ye(o,t,null),b(t,a),ye(c,t,null),b(t,f),G&&G.m(t,null),w(s,p,r),ye(d,s,r),w(s,g,r),ye(h,s,r),w(s,x,r),ye(_,s,r),w(s,P,r),ye(S,s,r),w(s,T,r),ye(C,s,r),w(s,L,r),w(s,N,r),e[44](N),O=!0,D||(q=[R(Co,"keydown",e[24]),R(N,"change",e[45])],D=!0)},p(e,l){const s={};51584&l[0]|33554432&l[1]&&(s.$$scope={dirty:l,ctx:e}),n.$set(s);const a={};!r&&512&l[0]&&(r=!0,a.selectedPosition=e[9],ne(()=>r=!1)),o.$set(a);const f={};128&l[0]&&(f.piano=e[7]),!i&&4096&l[0]&&(i=!0,f.selectedChannel=e[12],ne(()=>i=!1)),!u&&1024&l[0]&&(u=!0,f.selectedRow=e[10],ne(()=>u=!1)),!$&&8192&l[0]&&($=!0,f.selectedPattern=e[13],ne(()=>$=!1)),c.$set(f),e[8]?G?(G.p(e,l),256&l[0]&&pe(G,1)):(G=Io(e),G.c(),pe(G,1),G.m(t,null)):G&&($e(),de(G,1,1,()=>{G=null}),fe());const p={};16&l[0]|33554432&l[1]&&(p.$$scope={dirty:l,ctx:e}),!m&&16&l[0]&&(m=!0,p.open=e[4],ne(()=>m=!1)),d.$set(p);const g={};33554432&l[1]&&(g.$$scope={dirty:l,ctx:e}),!v&&8&l[0]&&(v=!0,g.open=e[3],ne(()=>v=!1)),h.$set(g);const b={};33554432&l[1]&&(b.$$scope={dirty:l,ctx:e}),!z&&64&l[0]&&(z=!0,b.open=e[6],ne(()=>z=!1)),_.$set(b);const w={};33554432&l[1]&&(w.$$scope={dirty:l,ctx:e}),!A&&32&l[0]&&(A=!0,w.open=e[5],ne(()=>A=!1)),S.$set(w);const y={};33554432&l[1]&&(y.$$scope={dirty:l,ctx:e}),!j&&4&l[0]&&(j=!0,y.open=e[2],ne(()=>j=!1)),C.$set(y)},i(e){O||(pe(n.$$.fragment,e),pe(o.$$.fragment,e),pe(c.$$.fragment,e),pe(G),pe(d.$$.fragment,e),pe(h.$$.fragment,e),pe(_.$$.fragment,e),pe(S.$$.fragment,e),pe(C.$$.fragment,e),O=!0)},o(e){de(n.$$.fragment,e),de(o.$$.fragment,e),de(c.$$.fragment,e),de(G),de(d.$$.fragment,e),de(h.$$.fragment,e),de(_.$$.fragment,e),de(S.$$.fragment,e),de(C.$$.fragment,e),O=!1},d(l){l&&y(t),xe(n),xe(o),xe(c),G&&G.d(),l&&y(p),xe(d,l),l&&y(g),xe(h,l),l&&y(x),xe(_,l),l&&y(P),xe(S,l),l&&y(T),xe(C,l),l&&y(L),l&&y(N),e[44](null),D=!1,s(q)}}}function Jo(e,t,n){let l,s,o,r,a,c,u,$,f,d,m,g,h;i(e,He,e=>n(9,l=e)),i(e,Fe,e=>n(10,s=e)),i(e,Ie,e=>n(48,o=e)),i(e,je,e=>n(11,r=e)),i(e,Xe,e=>n(12,a=e)),i(e,Be,e=>n(13,c=e)),i(e,De,e=>n(49,u=e)),i(e,We,e=>n(50,$=e)),i(e,Le,e=>n(14,f=e)),i(e,Je,e=>n(15,d=e)),i(e,Ge,e=>n(16,m=e));let v=!1,b=!1,w=!1,y=!1,x=!1,k=window.matchMedia("(min-height: 500px)").matches,_=window.matchMedia("(min-height: 800px)").matches;const z=(e,t)=>(yn(),e(t).then(E).catch(e=>alert(`Error loading ${t}\n\n${e.message}`))),E=()=>{He.set(0),Be.set(o[0]),Fe.set(0)},P=new URLSearchParams(location.search);Lt(),P.has("url")&&z(qt,P.get("url"));let R,M;return e.$$.update=()=>{1&e.$$.dirty[0]&&g&&(z(Dt,g[0]),n(0,g=null)),512&e.$$.dirty[0]&&n(46,R=Tt(l)),1024&e.$$.dirty[0]|32768&e.$$.dirty[1]&&n(47,M=R+s),512&e.$$.dirty[0]|65536&e.$$.dirty[1]&&(null!==l?Ke.set(M):Ke.set(-1)),12288&e.$$.dirty[0]|262144&e.$$.dirty[1]&&u[c][a]&&Ge.set(u[c][a][0])},[g,h,v,b,w,y,x,k,_,l,s,r,a,c,f,d,m,()=>{yn(),Ke.set(-1),He.set(null)},()=>{Be.set(o[l])},()=>{yn(),Be.set(o[l]),Fe.set(0)},()=>{h.click()},()=>{const e=document.createElement("a");e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(Ot())),e.setAttribute("download",r+".js"),e.style.display="none",document.body.appendChild(e),e.click(),e.remove()},()=>{n(2,v=!0)},()=>{n(3,b=!0)},e=>{const{key:t,shiftKey:n,altKey:l,ctrlKey:o,metaKey:r}=e;if(!(e=>"form"in e)(document.activeElement))if("ArrowLeft"===t)p(Xe,a--,a);else if("ArrowRight"===t)p(Xe,a++,a);else if("ArrowUp"===t)if(l){Mt(c,a,s,n?.1:.01)}else{const e=n?4:1;p(Fe,s=Math.max(0,s-e))}else if("ArrowDown"===t)if(l){Mt(c,a,s,-(n?.1:.01))}else{const e=n?4:1;p(Fe,s=Math.min(u[c][0].length-3,s+e))}else if(" "===t)St(c,a,s,-1);else if("Backspace"===t)e.preventDefault(),St(c,a,s,0);else if("Enter"===t)$?yn():l?(n&&E(),wn()):(n&&Fe.set(0),bn(c)),e.preventDefault();else if(!(n||l||r||o)){const e=ze[t];e&&(St(c,a,s,e),hn(u[c][a][0]||0,e))}},()=>{yn(),Lt(),E()},()=>{n(4,w=!0)},()=>{n(7,k=!k)},()=>{n(8,_=!_)},()=>{n(5,y=!y)},()=>{n(6,x=!x)},function(e){r=e,je.set(r)},function(e){f=e,Le.set(f)},function(e){d=e,Je.set(d)},function(e){l=e,He.set(l)},function(e){a=e,Xe.set(a)},function(e){s=e,Fe.set(s)},function(e){c=e,Be.set(c)},()=>n(4,w=!1),function(e){w=e,n(4,w)},function(e){b=e,n(3,b)},function(e){x=e,n(6,x)},function(e){y=e,n(5,y)},function(e){v=e,n(2,v)},function(e){V[e?"unshift":"push"](()=>{h=e,n(1,h)})},function(){g=this.files,n(0,g)}]}return new class extends _e{constructor(e){super(),ke(this,e,Jo,Go,r,{},[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
